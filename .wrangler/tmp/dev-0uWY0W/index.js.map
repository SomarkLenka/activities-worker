{
  "version": 3,
  "sources": ["../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/_internal/utils.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/perf_hooks/performance.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/polyfill/performance.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/console.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/mock/noop.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/node/console.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-console", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/hrtime.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/process.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/tty/read-stream.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/tty/write-stream.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/unenv/dist/runtime/node/internal/process/node-version.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/@cloudflare/unenv-preset/dist/runtime/node/process.mjs", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-process", "../../../src/utils/spa.js", "../../../src/routes/root.js", "../../../src/utils/nanoid.js", "../../../src/utils/admin.js", "../../../src/services/validation.js", "../../../src/services/storage.js", "../../../src/services/pdf.js", "../../../node_modules/resend/dist/index.mjs", "../../../src/services/mail.js", "../../../src/routes/submit.js", "../../../src/routes/submit-flow.js", "../../../src/routes/admin/search.js", "../../../src/routes/admin/activities.js", "../../../src/routes/admin/risks.js", "../../../src/routes/admin/properties.js", "../../../src/routes/admin/document.js", "../../../src/routes/admin/verify.js", "../../../src/routes/admin/releases.js", "../../../src/routes/admin/download-all.js", "../../../src/routes/admin/debug.js", "../../../src/routes/admin/api-docs.js", "../../../src/routes/status.js", "../../../src/routes/download.js", "../../../src/index.js", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-l3U5iW/middleware-insertion-facade.js", "../../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-l3U5iW/middleware-loader.entry.ts"],
  "sourceRoot": "C:\\Users\\scrap\\dev\\vitaliyah\\cf\\.wrangler\\tmp\\dev-0uWY0W",
  "sourcesContent": ["/* @__NO_SIDE_EFFECTS__ */\nexport function rawHeaders(headers) {\n\tconst rawHeaders = [];\n\tfor (const key in headers) {\n\t\tif (Array.isArray(headers[key])) {\n\t\t\tfor (const h of headers[key]) {\n\t\t\t\trawHeaders.push(key, h);\n\t\t\t}\n\t\t} else {\n\t\t\trawHeaders.push(key, headers[key]);\n\t\t}\n\t}\n\treturn rawHeaders;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function mergeFns(...functions) {\n\treturn function(...args) {\n\t\tfor (const fn of functions) {\n\t\t\tfn(...args);\n\t\t}\n\t};\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function createNotImplementedError(name) {\n\treturn new Error(`[unenv] ${name} is not implemented yet!`);\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplemented(name) {\n\tconst fn = () => {\n\t\tthrow createNotImplementedError(name);\n\t};\n\treturn Object.assign(fn, { __unenv__: true });\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedAsync(name) {\n\tconst fn = notImplemented(name);\n\tfn.__promisify__ = () => notImplemented(name + \".__promisify__\");\n\tfn.native = fn;\n\treturn fn;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedClass(name) {\n\treturn class {\n\t\t__unenv__ = true;\n\t\tconstructor() {\n\t\t\tthrow new Error(`[unenv] ${name} is not implemented yet!`);\n\t\t}\n\t};\n}\n", "import { createNotImplementedError } from \"../../../_internal/utils.mjs\";\nconst _timeOrigin = globalThis.performance?.timeOrigin ?? Date.now();\nconst _performanceNow = globalThis.performance?.now ? globalThis.performance.now.bind(globalThis.performance) : () => Date.now() - _timeOrigin;\nconst nodeTiming = {\n\tname: \"node\",\n\tentryType: \"node\",\n\tstartTime: 0,\n\tduration: 0,\n\tnodeStart: 0,\n\tv8Start: 0,\n\tbootstrapComplete: 0,\n\tenvironment: 0,\n\tloopStart: 0,\n\tloopExit: 0,\n\tidleTime: 0,\n\tuvMetricsInfo: {\n\t\tloopCount: 0,\n\t\tevents: 0,\n\t\teventsWaiting: 0\n\t},\n\tdetail: undefined,\n\ttoJSON() {\n\t\treturn this;\n\t}\n};\n// PerformanceEntry\nexport class PerformanceEntry {\n\t__unenv__ = true;\n\tdetail;\n\tentryType = \"event\";\n\tname;\n\tstartTime;\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tthis.startTime = options?.startTime || _performanceNow();\n\t\tthis.detail = options?.detail;\n\t}\n\tget duration() {\n\t\treturn _performanceNow() - this.startTime;\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tentryType: this.entryType,\n\t\t\tstartTime: this.startTime,\n\t\t\tduration: this.duration,\n\t\t\tdetail: this.detail\n\t\t};\n\t}\n}\n// PerformanceMark\nexport const PerformanceMark = class PerformanceMark extends PerformanceEntry {\n\tentryType = \"mark\";\n\tconstructor() {\n\t\t// @ts-ignore\n\t\tsuper(...arguments);\n\t}\n\tget duration() {\n\t\treturn 0;\n\t}\n};\n// PerformanceMark\nexport class PerformanceMeasure extends PerformanceEntry {\n\tentryType = \"measure\";\n}\n// PerformanceResourceTiming\nexport class PerformanceResourceTiming extends PerformanceEntry {\n\tentryType = \"resource\";\n\tserverTiming = [];\n\tconnectEnd = 0;\n\tconnectStart = 0;\n\tdecodedBodySize = 0;\n\tdomainLookupEnd = 0;\n\tdomainLookupStart = 0;\n\tencodedBodySize = 0;\n\tfetchStart = 0;\n\tinitiatorType = \"\";\n\tname = \"\";\n\tnextHopProtocol = \"\";\n\tredirectEnd = 0;\n\tredirectStart = 0;\n\trequestStart = 0;\n\tresponseEnd = 0;\n\tresponseStart = 0;\n\tsecureConnectionStart = 0;\n\tstartTime = 0;\n\ttransferSize = 0;\n\tworkerStart = 0;\n\tresponseStatus = 0;\n}\n// PerformanceObserverEntryList\nexport class PerformanceObserverEntryList {\n\t__unenv__ = true;\n\tgetEntries() {\n\t\treturn [];\n\t}\n\tgetEntriesByName(_name, _type) {\n\t\treturn [];\n\t}\n\tgetEntriesByType(type) {\n\t\treturn [];\n\t}\n}\n// Performance\nexport class Performance {\n\t__unenv__ = true;\n\ttimeOrigin = _timeOrigin;\n\teventCounts = new Map();\n\t_entries = [];\n\t_resourceTimingBufferSize = 0;\n\tnavigation = undefined;\n\ttiming = undefined;\n\ttimerify(_fn, _options) {\n\t\tthrow createNotImplementedError(\"Performance.timerify\");\n\t}\n\tget nodeTiming() {\n\t\treturn nodeTiming;\n\t}\n\teventLoopUtilization() {\n\t\treturn {};\n\t}\n\tmarkResourceTiming() {\n\t\t// TODO: create a new PerformanceResourceTiming entry\n\t\t// so that performance.getEntries, getEntriesByName, and getEntriesByType return it\n\t\t// see: https://nodejs.org/api/perf_hooks.html#performancemarkresourcetimingtiminginfo-requestedurl-initiatortype-global-cachemode-bodyinfo-responsestatus-deliverytype\n\t\treturn new PerformanceResourceTiming(\"\");\n\t}\n\tonresourcetimingbufferfull = null;\n\tnow() {\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\n\t\tif (this.timeOrigin === _timeOrigin) {\n\t\t\treturn _performanceNow();\n\t\t}\n\t\treturn Date.now() - this.timeOrigin;\n\t}\n\tclearMarks(markName) {\n\t\tthis._entries = markName ? this._entries.filter((e) => e.name !== markName) : this._entries.filter((e) => e.entryType !== \"mark\");\n\t}\n\tclearMeasures(measureName) {\n\t\tthis._entries = measureName ? this._entries.filter((e) => e.name !== measureName) : this._entries.filter((e) => e.entryType !== \"measure\");\n\t}\n\tclearResourceTimings() {\n\t\tthis._entries = this._entries.filter((e) => e.entryType !== \"resource\" || e.entryType !== \"navigation\");\n\t}\n\tgetEntries() {\n\t\treturn this._entries;\n\t}\n\tgetEntriesByName(name, type) {\n\t\treturn this._entries.filter((e) => e.name === name && (!type || e.entryType === type));\n\t}\n\tgetEntriesByType(type) {\n\t\treturn this._entries.filter((e) => e.entryType === type);\n\t}\n\tmark(name, options) {\n\t\t// @ts-expect-error constructor is not protected\n\t\tconst entry = new PerformanceMark(name, options);\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tmeasure(measureName, startOrMeasureOptions, endMark) {\n\t\tlet start;\n\t\tlet end;\n\t\tif (typeof startOrMeasureOptions === \"string\") {\n\t\t\tstart = this.getEntriesByName(startOrMeasureOptions, \"mark\")[0]?.startTime;\n\t\t\tend = this.getEntriesByName(endMark, \"mark\")[0]?.startTime;\n\t\t} else {\n\t\t\tstart = Number.parseFloat(startOrMeasureOptions?.start) || this.now();\n\t\t\tend = Number.parseFloat(startOrMeasureOptions?.end) || this.now();\n\t\t}\n\t\tconst entry = new PerformanceMeasure(measureName, {\n\t\t\tstartTime: start,\n\t\t\tdetail: {\n\t\t\t\tstart,\n\t\t\t\tend\n\t\t\t}\n\t\t});\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tsetResourceTimingBufferSize(maxSize) {\n\t\tthis._resourceTimingBufferSize = maxSize;\n\t}\n\taddEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.addEventListener\");\n\t}\n\tremoveEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.removeEventListener\");\n\t}\n\tdispatchEvent(event) {\n\t\tthrow createNotImplementedError(\"Performance.dispatchEvent\");\n\t}\n\ttoJSON() {\n\t\treturn this;\n\t}\n}\n// PerformanceObserver\nexport class PerformanceObserver {\n\t__unenv__ = true;\n\tstatic supportedEntryTypes = [];\n\t_callback = null;\n\tconstructor(callback) {\n\t\tthis._callback = callback;\n\t}\n\ttakeRecords() {\n\t\treturn [];\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.disconnect\");\n\t}\n\tobserve(options) {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.observe\");\n\t}\n\tbind(fn) {\n\t\treturn fn;\n\t}\n\trunInAsyncScope(fn, thisArg, ...args) {\n\t\treturn fn.call(thisArg, ...args);\n\t}\n\tasyncId() {\n\t\treturn 0;\n\t}\n\ttriggerAsyncId() {\n\t\treturn 0;\n\t}\n\temitDestroy() {\n\t\treturn this;\n\t}\n}\n// workerd implements a subset of globalThis.performance (as of last check, only timeOrigin set to 0 + now() implemented)\n// We already use performance.now() from globalThis.performance, if provided (see top of this file)\n// If we detect this condition, we can just use polyfill instead.\nexport const performance = globalThis.performance && \"addEventListener\" in globalThis.performance ? globalThis.performance : new Performance();\n", "import {\n  performance,\n  Performance,\n  PerformanceEntry,\n  PerformanceMark,\n  PerformanceMeasure,\n  PerformanceObserver,\n  PerformanceObserverEntryList,\n  PerformanceResourceTiming\n} from \"node:perf_hooks\";\nglobalThis.performance = performance;\nglobalThis.Performance = Performance;\nglobalThis.PerformanceEntry = PerformanceEntry;\nglobalThis.PerformanceMark = PerformanceMark;\nglobalThis.PerformanceMeasure = PerformanceMeasure;\nglobalThis.PerformanceObserver = PerformanceObserver;\nglobalThis.PerformanceObserverEntryList = PerformanceObserverEntryList;\nglobalThis.PerformanceResourceTiming = PerformanceResourceTiming;\n", "import { Writable } from \"node:stream\";\nimport noop from \"../mock/noop.mjs\";\nimport { notImplemented, notImplementedClass } from \"../_internal/utils.mjs\";\nconst _console = globalThis.console;\n// undocumented public APIs\nexport const _ignoreErrors = true;\nexport const _stderr = new Writable();\nexport const _stdout = new Writable();\nexport const log = _console?.log ?? noop;\nexport const info = _console?.info ?? log;\nexport const trace = _console?.trace ?? info;\nexport const debug = _console?.debug ?? log;\nexport const table = _console?.table ?? log;\nexport const error = _console?.error ?? log;\nexport const warn = _console?.warn ?? error;\n// https://developer.chrome.com/docs/devtools/console/api#createtask\nexport const createTask = _console?.createTask ?? /* @__PURE__ */ notImplemented(\"console.createTask\");\nexport const assert = /* @__PURE__ */ notImplemented(\"console.assert\");\n// noop\nexport const clear = _console?.clear ?? noop;\nexport const count = _console?.count ?? noop;\nexport const countReset = _console?.countReset ?? noop;\nexport const dir = _console?.dir ?? noop;\nexport const dirxml = _console?.dirxml ?? noop;\nexport const group = _console?.group ?? noop;\nexport const groupEnd = _console?.groupEnd ?? noop;\nexport const groupCollapsed = _console?.groupCollapsed ?? noop;\nexport const profile = _console?.profile ?? noop;\nexport const profileEnd = _console?.profileEnd ?? noop;\nexport const time = _console?.time ?? noop;\nexport const timeEnd = _console?.timeEnd ?? noop;\nexport const timeLog = _console?.timeLog ?? noop;\nexport const timeStamp = _console?.timeStamp ?? noop;\nexport const Console = _console?.Console ?? /* @__PURE__ */ notImplementedClass(\"console.Console\");\nexport const _times = /* @__PURE__ */ new Map();\nexport function context() {\n\t// TODO: Should be Console with all the methods\n\treturn _console;\n}\nexport const _stdoutErrorHandler = noop;\nexport const _stderrErrorHandler = noop;\nexport default {\n\t_times,\n\t_ignoreErrors,\n\t_stdoutErrorHandler,\n\t_stderrErrorHandler,\n\t_stdout,\n\t_stderr,\n\tassert,\n\tclear,\n\tConsole,\n\tcount,\n\tcountReset,\n\tdebug,\n\tdir,\n\tdirxml,\n\terror,\n\tcontext,\n\tcreateTask,\n\tgroup,\n\tgroupEnd,\n\tgroupCollapsed,\n\tinfo,\n\tlog,\n\tprofile,\n\tprofileEnd,\n\ttable,\n\ttime,\n\ttimeEnd,\n\ttimeLog,\n\ttimeStamp,\n\ttrace,\n\twarn\n};\n", "export default Object.assign(() => {}, { __unenv__: true });\n", "import {\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times,\n  Console\n} from \"unenv/node/console\";\nexport {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n} from \"unenv/node/console\";\nconst workerdConsole = globalThis[\"console\"];\nexport const {\n  assert,\n  clear,\n  // @ts-expect-error undocumented public API\n  context,\n  count,\n  countReset,\n  // @ts-expect-error undocumented public API\n  createTask,\n  debug,\n  dir,\n  dirxml,\n  error,\n  group,\n  groupCollapsed,\n  groupEnd,\n  info,\n  log,\n  profile,\n  profileEnd,\n  table,\n  time,\n  timeEnd,\n  timeLog,\n  timeStamp,\n  trace,\n  warn\n} = workerdConsole;\nObject.assign(workerdConsole, {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n});\nexport default workerdConsole;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/console\";\nglobalThis.console = defaultExport;", "// https://nodejs.org/api/process.html#processhrtime\nexport const hrtime = /* @__PURE__ */ Object.assign(function hrtime(startTime) {\n\tconst now = Date.now();\n\t// millis to seconds\n\tconst seconds = Math.trunc(now / 1e3);\n\t// convert millis to nanos\n\tconst nanos = now % 1e3 * 1e6;\n\tif (startTime) {\n\t\tlet diffSeconds = seconds - startTime[0];\n\t\tlet diffNanos = nanos - startTime[0];\n\t\tif (diffNanos < 0) {\n\t\t\tdiffSeconds = diffSeconds - 1;\n\t\t\tdiffNanos = 1e9 + diffNanos;\n\t\t}\n\t\treturn [diffSeconds, diffNanos];\n\t}\n\treturn [seconds, nanos];\n}, { bigint: function bigint() {\n\t// Convert milliseconds to nanoseconds\n\treturn BigInt(Date.now() * 1e6);\n} });\n", "import { EventEmitter } from \"node:events\";\nimport { ReadStream, WriteStream } from \"node:tty\";\nimport { notImplemented, createNotImplementedError } from \"../../../_internal/utils.mjs\";\n// node-version.ts is generated at build time\nimport { NODE_VERSION } from \"./node-version.mjs\";\nexport class Process extends EventEmitter {\n\tenv;\n\thrtime;\n\tnextTick;\n\tconstructor(impl) {\n\t\tsuper();\n\t\tthis.env = impl.env;\n\t\tthis.hrtime = impl.hrtime;\n\t\tthis.nextTick = impl.nextTick;\n\t\tfor (const prop of [...Object.getOwnPropertyNames(Process.prototype), ...Object.getOwnPropertyNames(EventEmitter.prototype)]) {\n\t\t\tconst value = this[prop];\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tthis[prop] = value.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\t// --- event emitter ---\n\temitWarning(warning, type, code) {\n\t\tconsole.warn(`${code ? `[${code}] ` : \"\"}${type ? `${type}: ` : \"\"}${warning}`);\n\t}\n\temit(...args) {\n\t\t// @ts-ignore\n\t\treturn super.emit(...args);\n\t}\n\tlisteners(eventName) {\n\t\treturn super.listeners(eventName);\n\t}\n\t// --- stdio (lazy initializers) ---\n\t#stdin;\n\t#stdout;\n\t#stderr;\n\tget stdin() {\n\t\treturn this.#stdin ??= new ReadStream(0);\n\t}\n\tget stdout() {\n\t\treturn this.#stdout ??= new WriteStream(1);\n\t}\n\tget stderr() {\n\t\treturn this.#stderr ??= new WriteStream(2);\n\t}\n\t// --- cwd ---\n\t#cwd = \"/\";\n\tchdir(cwd) {\n\t\tthis.#cwd = cwd;\n\t}\n\tcwd() {\n\t\treturn this.#cwd;\n\t}\n\t// --- dummy props and getters ---\n\tarch = \"\";\n\tplatform = \"\";\n\targv = [];\n\targv0 = \"\";\n\texecArgv = [];\n\texecPath = \"\";\n\ttitle = \"\";\n\tpid = 200;\n\tppid = 100;\n\tget version() {\n\t\treturn `v${NODE_VERSION}`;\n\t}\n\tget versions() {\n\t\treturn { node: NODE_VERSION };\n\t}\n\tget allowedNodeEnvironmentFlags() {\n\t\treturn new Set();\n\t}\n\tget sourceMapsEnabled() {\n\t\treturn false;\n\t}\n\tget debugPort() {\n\t\treturn 0;\n\t}\n\tget throwDeprecation() {\n\t\treturn false;\n\t}\n\tget traceDeprecation() {\n\t\treturn false;\n\t}\n\tget features() {\n\t\treturn {};\n\t}\n\tget release() {\n\t\treturn {};\n\t}\n\tget connected() {\n\t\treturn false;\n\t}\n\tget config() {\n\t\treturn {};\n\t}\n\tget moduleLoadList() {\n\t\treturn [];\n\t}\n\tconstrainedMemory() {\n\t\treturn 0;\n\t}\n\tavailableMemory() {\n\t\treturn 0;\n\t}\n\tuptime() {\n\t\treturn 0;\n\t}\n\tresourceUsage() {\n\t\treturn {};\n\t}\n\t// --- noop methods ---\n\tref() {\n\t\t// noop\n\t}\n\tunref() {\n\t\t// noop\n\t}\n\t// --- unimplemented methods ---\n\tumask() {\n\t\tthrow createNotImplementedError(\"process.umask\");\n\t}\n\tgetBuiltinModule() {\n\t\treturn undefined;\n\t}\n\tgetActiveResourcesInfo() {\n\t\tthrow createNotImplementedError(\"process.getActiveResourcesInfo\");\n\t}\n\texit() {\n\t\tthrow createNotImplementedError(\"process.exit\");\n\t}\n\treallyExit() {\n\t\tthrow createNotImplementedError(\"process.reallyExit\");\n\t}\n\tkill() {\n\t\tthrow createNotImplementedError(\"process.kill\");\n\t}\n\tabort() {\n\t\tthrow createNotImplementedError(\"process.abort\");\n\t}\n\tdlopen() {\n\t\tthrow createNotImplementedError(\"process.dlopen\");\n\t}\n\tsetSourceMapsEnabled() {\n\t\tthrow createNotImplementedError(\"process.setSourceMapsEnabled\");\n\t}\n\tloadEnvFile() {\n\t\tthrow createNotImplementedError(\"process.loadEnvFile\");\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"process.disconnect\");\n\t}\n\tcpuUsage() {\n\t\tthrow createNotImplementedError(\"process.cpuUsage\");\n\t}\n\tsetUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.setUncaughtExceptionCaptureCallback\");\n\t}\n\thasUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.hasUncaughtExceptionCaptureCallback\");\n\t}\n\tinitgroups() {\n\t\tthrow createNotImplementedError(\"process.initgroups\");\n\t}\n\topenStdin() {\n\t\tthrow createNotImplementedError(\"process.openStdin\");\n\t}\n\tassert() {\n\t\tthrow createNotImplementedError(\"process.assert\");\n\t}\n\tbinding() {\n\t\tthrow createNotImplementedError(\"process.binding\");\n\t}\n\t// --- attached interfaces ---\n\tpermission = { has: /* @__PURE__ */ notImplemented(\"process.permission.has\") };\n\treport = {\n\t\tdirectory: \"\",\n\t\tfilename: \"\",\n\t\tsignal: \"SIGUSR2\",\n\t\tcompact: false,\n\t\treportOnFatalError: false,\n\t\treportOnSignal: false,\n\t\treportOnUncaughtException: false,\n\t\tgetReport: /* @__PURE__ */ notImplemented(\"process.report.getReport\"),\n\t\twriteReport: /* @__PURE__ */ notImplemented(\"process.report.writeReport\")\n\t};\n\tfinalization = {\n\t\tregister: /* @__PURE__ */ notImplemented(\"process.finalization.register\"),\n\t\tunregister: /* @__PURE__ */ notImplemented(\"process.finalization.unregister\"),\n\t\tregisterBeforeExit: /* @__PURE__ */ notImplemented(\"process.finalization.registerBeforeExit\")\n\t};\n\tmemoryUsage = Object.assign(() => ({\n\t\tarrayBuffers: 0,\n\t\trss: 0,\n\t\texternal: 0,\n\t\theapTotal: 0,\n\t\theapUsed: 0\n\t}), { rss: () => 0 });\n\t// --- undefined props ---\n\tmainModule = undefined;\n\tdomain = undefined;\n\t// optional\n\tsend = undefined;\n\texitCode = undefined;\n\tchannel = undefined;\n\tgetegid = undefined;\n\tgeteuid = undefined;\n\tgetgid = undefined;\n\tgetgroups = undefined;\n\tgetuid = undefined;\n\tsetegid = undefined;\n\tseteuid = undefined;\n\tsetgid = undefined;\n\tsetgroups = undefined;\n\tsetuid = undefined;\n\t// internals\n\t_events = undefined;\n\t_eventsCount = undefined;\n\t_exiting = undefined;\n\t_maxListeners = undefined;\n\t_debugEnd = undefined;\n\t_debugProcess = undefined;\n\t_fatalException = undefined;\n\t_getActiveHandles = undefined;\n\t_getActiveRequests = undefined;\n\t_kill = undefined;\n\t_preload_modules = undefined;\n\t_rawDebug = undefined;\n\t_startProfilerIdleNotifier = undefined;\n\t_stopProfilerIdleNotifier = undefined;\n\t_tickCallback = undefined;\n\t_disconnect = undefined;\n\t_handleQueue = undefined;\n\t_pendingMessage = undefined;\n\t_channel = undefined;\n\t_send = undefined;\n\t_linkedBinding = undefined;\n}\n", "export class ReadStream {\n\tfd;\n\tisRaw = false;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tsetRawMode(mode) {\n\t\tthis.isRaw = mode;\n\t\treturn this;\n\t}\n}\n", "export class WriteStream {\n\tfd;\n\tcolumns = 80;\n\trows = 24;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tclearLine(dir, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tclearScreenDown(callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tcursorTo(x, y, callback) {\n\t\tcallback && typeof callback === \"function\" && callback();\n\t\treturn false;\n\t}\n\tmoveCursor(dx, dy, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tgetColorDepth(env) {\n\t\treturn 1;\n\t}\n\thasColors(count, env) {\n\t\treturn false;\n\t}\n\tgetWindowSize() {\n\t\treturn [this.columns, this.rows];\n\t}\n\twrite(str, encoding, cb) {\n\t\tif (str instanceof Uint8Array) {\n\t\t\tstr = new TextDecoder().decode(str);\n\t\t}\n\t\ttry {\n\t\t\tconsole.log(str);\n\t\t} catch {}\n\t\tcb && typeof cb === \"function\" && cb();\n\t\treturn false;\n\t}\n}\n", "// Extracted from .nvmrc\nexport const NODE_VERSION = \"22.14.0\";\n", "import { hrtime as UnenvHrTime } from \"unenv/node/internal/process/hrtime\";\nimport { Process as UnenvProcess } from \"unenv/node/internal/process/process\";\nconst globalProcess = globalThis[\"process\"];\nexport const getBuiltinModule = globalProcess.getBuiltinModule;\nconst workerdProcess = getBuiltinModule(\"node:process\");\nconst isWorkerdProcessV2 = globalThis.Cloudflare.compatibilityFlags.enable_nodejs_process_v2;\nconst unenvProcess = new UnenvProcess({\n  env: globalProcess.env,\n  // `hrtime` is only available from workerd process v2\n  hrtime: isWorkerdProcessV2 ? workerdProcess.hrtime : UnenvHrTime,\n  // `nextTick` is available from workerd process v1\n  nextTick: workerdProcess.nextTick\n});\nexport const { exit, features, platform } = workerdProcess;\nexport const {\n  // Always implemented by workerd\n  env,\n  // Only implemented in workerd v2\n  hrtime,\n  // Always implemented by workerd\n  nextTick\n} = unenvProcess;\nexport const {\n  _channel,\n  _disconnect,\n  _events,\n  _eventsCount,\n  _handleQueue,\n  _maxListeners,\n  _pendingMessage,\n  _send,\n  assert,\n  disconnect,\n  mainModule\n} = unenvProcess;\nexport const {\n  // @ts-expect-error `_debugEnd` is missing typings\n  _debugEnd,\n  // @ts-expect-error `_debugProcess` is missing typings\n  _debugProcess,\n  // @ts-expect-error `_exiting` is missing typings\n  _exiting,\n  // @ts-expect-error `_fatalException` is missing typings\n  _fatalException,\n  // @ts-expect-error `_getActiveHandles` is missing typings\n  _getActiveHandles,\n  // @ts-expect-error `_getActiveRequests` is missing typings\n  _getActiveRequests,\n  // @ts-expect-error `_kill` is missing typings\n  _kill,\n  // @ts-expect-error `_linkedBinding` is missing typings\n  _linkedBinding,\n  // @ts-expect-error `_preload_modules` is missing typings\n  _preload_modules,\n  // @ts-expect-error `_rawDebug` is missing typings\n  _rawDebug,\n  // @ts-expect-error `_startProfilerIdleNotifier` is missing typings\n  _startProfilerIdleNotifier,\n  // @ts-expect-error `_stopProfilerIdleNotifier` is missing typings\n  _stopProfilerIdleNotifier,\n  // @ts-expect-error `_tickCallback` is missing typings\n  _tickCallback,\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  arch,\n  argv,\n  argv0,\n  availableMemory,\n  // @ts-expect-error `binding` is missing typings\n  binding,\n  channel,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  // @ts-expect-error `domain` is missing typings\n  domain,\n  emit,\n  emitWarning,\n  eventNames,\n  execArgv,\n  execPath,\n  exitCode,\n  finalization,\n  getActiveResourcesInfo,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getMaxListeners,\n  getuid,\n  hasUncaughtExceptionCaptureCallback,\n  // @ts-expect-error `initgroups` is missing typings\n  initgroups,\n  kill,\n  listenerCount,\n  listeners,\n  loadEnvFile,\n  memoryUsage,\n  // @ts-expect-error `moduleLoadList` is missing typings\n  moduleLoadList,\n  off,\n  on,\n  once,\n  // @ts-expect-error `openStdin` is missing typings\n  openStdin,\n  permission,\n  pid,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  // @ts-expect-error `reallyExit` is missing typings\n  reallyExit,\n  ref,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  send,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  setuid,\n  setUncaughtExceptionCaptureCallback,\n  sourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  throwDeprecation,\n  title,\n  traceDeprecation,\n  umask,\n  unref,\n  uptime,\n  version,\n  versions\n} = isWorkerdProcessV2 ? workerdProcess : unenvProcess;\nconst _process = {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  exit,\n  finalization,\n  features,\n  getBuiltinModule,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  nextTick,\n  on,\n  off,\n  once,\n  pid,\n  platform,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  // @ts-expect-error old API\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n};\nexport default _process;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/process\";\nglobalThis.process = defaultExport;", "export async function htmlPage(env, submissionToken = null) {\r\n  let submissionData = null;\r\n\r\n  // If token provided, fetch submission details\r\n  if (submissionToken) {\r\n    const result = await env.waivers.prepare(\r\n      'SELECT submission_id, property_id, checkin_date, guest_name, guest_email, status, token_expires_at FROM submissions WHERE verification_token = ?'\r\n    ).bind(submissionToken).first();\r\n\r\n    if (result && result.status === 'pending') {\r\n      const expires = new Date(result.token_expires_at);\r\n      if (expires > new Date()) {\r\n        submissionData = result;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fetch all properties from database\r\n  const propertiesResult = await env.waivers.prepare(\r\n    'SELECT id, name FROM properties ORDER BY name'\r\n  ).all();\r\n  const properties = propertiesResult.results || [];\r\n\r\n  // Fetch activities for each property\r\n  const propsData = [];\r\n  for (const property of properties) {\r\n    const activitiesResult = await env.waivers.prepare(\r\n      'SELECT slug, label, risk FROM activities WHERE property_id = ? ORDER BY label'\r\n    ).bind(property.id).all();\r\n\r\n    propsData.push({\r\n      id: property.id,\r\n      name: property.name,\r\n      activities: activitiesResult.results || []\r\n    });\r\n  }\r\n\r\n  // Fetch risk descriptions from database\r\n  const risksResult = await env.waivers.prepare(\r\n    'SELECT level, description FROM risk_descriptions'\r\n  ).all();\r\n\r\n  const risks = {};\r\n  for (const row of (risksResult.results || [])) {\r\n    risks[row.level] = { description: row.description };\r\n  }\r\n\r\n  const propsJSON = JSON.stringify(propsData);\r\n  const props64 = btoa(unescape(encodeURIComponent(propsJSON)));\r\n\r\n  const risksJSON = JSON.stringify(risks);\r\n  const risks64 = btoa(unescape(encodeURIComponent(risksJSON)));\r\n\r\n  const submissionJSON = submissionData ? JSON.stringify(submissionData) : 'null';\r\n  const submission64 = btoa(unescape(encodeURIComponent(submissionJSON)));\r\n\r\n  return new Response(`\r\n<!doctype html>\r\n<html lang=\"en\"><meta charset=\"utf-8\">\r\n<title>Activity Waiver</title>\r\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\r\n<style>\r\n  *{box-sizing:border-box}\r\n  body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;margin:0;padding:2rem 1rem;background:#f8fafc;color:#1e293b;line-height:1.6}\r\n  .container{max-width:1200px;margin:0 auto;background:white;border-radius:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);overflow:hidden}\r\n  .header{background:linear-gradient(135deg,#3b82f6 0%,#1d4ed8 100%);padding:2.5rem 2rem;color:white;text-align:center}\r\n  .header h1{margin:0 0 0.5rem 0;font-size:2rem;font-weight:700}\r\n  .header p{margin:0;opacity:0.9;font-size:1rem}\r\n  .content{padding:2rem}\r\n  .form-group{margin-bottom:1.5rem}\r\n  .form-group label{display:block;margin-bottom:0.5rem;font-weight:600;font-size:0.875rem;color:#475569}\r\n  .form-group input,.form-group select{width:100%;padding:0.75rem 1rem;border:1px solid #cbd5e1;border-radius:8px;font-size:1rem;transition:all 0.2s;max-width:400px}\r\n  .form-group input:focus,.form-group select:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.1)}\r\n  .section-title{font-size:1.25rem;font-weight:700;color:#0f172a;margin:2rem 0 1rem 0;padding-bottom:0.5rem;border-bottom:2px solid #e2e8f0}\r\n  .activities-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;column-gap:24px;padding:0;overflow:hidden}\r\n  .activity-row{display:flex;gap:8px;align-items:center}\r\n  .activity-item{display:flex;align-items:center;padding:12px;background:#f8fafc;border-radius:10px;border:2px solid #e2e8f0;cursor:pointer;transition:all 0.2s;flex:1;position:relative;min-height:68px;overflow:hidden}\r\n  .activity-item:hover{background:#f1f5f9;border-color:#3b82f6}\r\n  .activity-item.checked{background:#eff6ff;border-color:#3b82f6}\r\n  .activity-item input[type=\"checkbox\"]{margin-right:10px;cursor:pointer;width:20px;height:20px;flex-shrink:0;accent-color:#3b82f6}\r\n  .activity-item label{margin:0;cursor:pointer;flex:1;display:flex;align-items:center;gap:8px;position:relative;z-index:1;justify-content:space-between}\r\n  .activity-label-text{white-space:nowrap;flex-shrink:0;min-width:120px;font-weight:600;color:#1e293b}\r\n  .risk-chip-wrapper{display:flex;align-items:center;justify-content:flex-end;min-width:360px;width:360px;transition:all 0.3s ease;position:relative;overflow:visible;z-index:10}\r\n  .risk-chip{padding:6px 14px;border-radius:12px;color:white;font-size:11px;font-weight:600;white-space:nowrap;display:inline-block;width:100px;text-align:center;box-sizing:border-box;flex-shrink:0;position:absolute;right:0;z-index:2}\r\n  .risk-low{background:#10b981}\r\n  .risk-medium{background:#f59e0b}\r\n  .risk-high{background:#ef4444}\r\n  .risk-details{position:absolute;right:110px;width:250px;opacity:0;font-size:9px;line-height:1.3;color:#334155;transition:opacity 0.3s ease;padding:4px 8px;display:block;box-sizing:border-box;max-height:56px;overflow-y:auto;background:white;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,0.1);white-space:normal}\r\n  .risk-chip-wrapper:hover .risk-details{opacity:1}\r\n  .activity-initial{width:70px;height:50px;text-align:center;padding:0;border:2px solid #cbd5e1;border-radius:8px;visibility:hidden;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;background:white;transition:all 0.2s}\r\n  .activity-initial.visible{visibility:visible;border-color:#3b82f6}\r\n  .activity-initial:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.1)}\r\n  .acceptance-box{background:#fef3c7;border:2px solid #fbbf24;border-radius:10px;padding:1rem;margin:1.5rem 0;display:flex;align-items:center;gap:0.75rem;position:relative}\r\n  .acceptance-box input[type=\"checkbox\"]{width:20px;height:20px;accent-color:#f59e0b;cursor:pointer}\r\n  .acceptance-box label{margin:0;font-weight:600;color:#78350f;cursor:pointer}\r\n  .acceptance-box input[type=\"checkbox\"]:disabled{cursor:not-allowed;opacity:0.5}\r\n  .acceptance-box .tooltip{display:none;position:absolute;bottom:100%;left:50%;transform:translateX(-50%);background:#1e293b;color:white;padding:0.5rem 1rem;border-radius:6px;font-size:0.875rem;white-space:nowrap;margin-bottom:0.5rem;font-weight:400}\r\n  .acceptance-box .tooltip::after{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:6px solid transparent;border-top-color:#1e293b}\r\n  .acceptance-box:has(input[type=\"checkbox\"]:disabled):hover .tooltip{display:block}\r\n  .signature-container{display:flex;flex-direction:column;align-items:center;gap:12px;padding:1.5rem;background:#f8fafc;border-radius:10px;border:2px solid #e2e8f0}\r\n  canvas{border:2px dashed #cbd5e1;border-radius:8px;width:90%;max-width:600px;touch-action:none;display:block;background:white}\r\n  button{font-weight:600;border:none;cursor:pointer;transition:all 0.2s;font-size:1rem;border-radius:8px;font-family:inherit}\r\n  #clearSig{padding:0.625rem 1.5rem;background:#64748b;color:white}\r\n  #clearSig:hover{background:#475569}\r\n  #submit{width:100%;padding:1rem;background:#3b82f6;color:white;font-size:1.125rem;margin-top:1.5rem;max-width:400px}\r\n  #submit:hover:not(:disabled){background:#2563eb}\r\n  #submit:disabled{opacity:0.5;cursor:not-allowed}\r\n  .thanks{padding:2rem;text-align:center}\r\n  .thanks h2{color:#3b82f6;font-size:1.75rem;margin-bottom:1rem}\r\n  .info-box{background:#eff6ff;border:2px solid #3b82f6;border-radius:10px;padding:1rem;margin-bottom:1.5rem}\r\n  .info-box p{margin:0.25rem 0;color:#1e40af}\r\n  @media (max-width:768px){\r\n    .content{padding:1.5rem}\r\n    .activities-grid{grid-template-columns:1fr}\r\n    .form-group input,.form-group select{width:100%;max-width:100%}\r\n    canvas{width:100%}\r\n  }\r\n</style>\r\n\r\n<body>\r\n  <div class=\"container\">\r\n    <div class=\"header\">\r\n      <h1>Activity Waiver</h1>\r\n      <p id=\"headerSubtitle\">Complete your waiver to get started</p>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <!-- Initial Info Form -->\r\n      <form id=\"initialForm\">\r\n        <div class=\"form-group\">\r\n          <label>Property</label>\r\n          <select id=\"prop\" required></select>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Check-in Date</label>\r\n          <input type=\"date\" id=\"date\" required>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Full Name</label>\r\n          <input id=\"name\" required>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Email Address</label>\r\n          <input id=\"email\" type=\"email\" required>\r\n        </div>\r\n\r\n        <button id=\"initialSubmit\">Continue to Activities</button>\r\n      </form>\r\n\r\n      <!-- Activity Selection Form (hidden initially) -->\r\n      <form id=\"activityForm\" hidden>\r\n        <div class=\"info-box\" id=\"guestInfo\"></div>\r\n\r\n        <h3 class=\"section-title\">Select Activities</h3>\r\n        <div id=\"activities\" class=\"activities-grid\"></div>\r\n\r\n        <div class=\"acceptance-box\">\r\n          <input id=\"master\" type=\"checkbox\" required>\r\n          <label for=\"master\">I have read and accept all risks</label>\r\n          <span class=\"tooltip\" id=\"masterTooltip\">Please initial all selected activities first</span>\r\n        </div>\r\n\r\n        <h3 class=\"section-title\">Signature</h3>\r\n        <div class=\"signature-container\">\r\n          <canvas id=\"sign\" width=\"600\" height=\"200\"></canvas>\r\n          <button id=\"clearSig\" type=\"button\">Clear</button>\r\n        </div>\r\n\r\n        <button id=\"submit\">Submit Waiver</button>\r\n      </form>\r\n\r\n      <div id=\"thanks\" class=\"thanks\" hidden></div>\r\n    </div>\r\n  </div>\r\n\r\n<script type=\"module\">\r\n  /* ---------- bootstrap data -------------------- */\r\n  let props = JSON.parse(atob('${props64}'));\r\n  const risks = JSON.parse(atob('${risks64}'));\r\n  const submission = JSON.parse(atob('${submission64}'));\r\n\r\n  console.log(\"Props:\", props);\r\n  console.log(\"Risks:\", risks);\r\n  console.log(\"Submission:\", submission);\r\n\r\n  if (!Array.isArray(props)) {\r\n    props = [props];\r\n  }\r\n\r\n  const propSel = document.getElementById('prop');\r\n  if (!props || props.length === 0) {\r\n    propSel.add(new Option('No properties available', ''));\r\n    propSel.disabled = true;\r\n  } else {\r\n    props.forEach(p => propSel.add(new Option(p.name, p.id)));\r\n  }\r\n\r\n  /* ---------- Determine which form to show -------------------- */\r\n  const initialForm = document.getElementById('initialForm');\r\n  const activityForm = document.getElementById('activityForm');\r\n  const headerSubtitle = document.getElementById('headerSubtitle');\r\n\r\n  if (submission) {\r\n    // Show activity form with pre-filled info\r\n    initialForm.hidden = true;\r\n    activityForm.hidden = false;\r\n    headerSubtitle.textContent = 'Select your activities and sign';\r\n\r\n    // Pre-fill property selection\r\n    propSel.value = submission.property_id;\r\n    propSel.disabled = true;\r\n\r\n    // Show guest info\r\n    document.getElementById('guestInfo').innerHTML =\r\n      '<p><strong>Property:</strong> ' + props.find(p => p.id === submission.property_id)?.name + '</p>' +\r\n      '<p><strong>Check-in:</strong> ' + submission.checkin_date + '</p>' +\r\n      '<p><strong>Name:</strong> ' + submission.guest_name + '</p>' +\r\n      '<p><strong>Email:</strong> ' + submission.guest_email + '</p>';\r\n  } else {\r\n    // Show initial form\r\n    initialForm.hidden = false;\r\n    activityForm.hidden = true;\r\n  }\r\n\r\n  /* ---------- Initial form submission -------------------- */\r\n  document.getElementById('initialForm').onsubmit = async e => {\r\n    e.preventDefault();\r\n\r\n    const data = {\r\n      propertyId: propSel.value,\r\n      checkinDate: document.getElementById('date').value,\r\n      guestName: document.getElementById('name').value,\r\n      guestEmail: document.getElementById('email').value\r\n    };\r\n\r\n    console.log(\"Submitting initial form:\", data);\r\n\r\n    try {\r\n      const res = await fetch('/submit/initial', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data)\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        console.error(\"Server error:\", errorText);\r\n        alert(\"Error: \" + errorText);\r\n        return;\r\n      }\r\n\r\n      const json = await res.json();\r\n      console.log(\"Response:\", json);\r\n\r\n      // Show confirmation message\r\n      initialForm.hidden = true;\r\n      document.getElementById('thanks').hidden = false;\r\n      document.getElementById('thanks').innerHTML =\r\n        '<h2>\u2713 Check Your Email</h2>' +\r\n        '<p style=\"color:#64748b;margin-bottom:1.5rem\">We\\\\'ve sent a verification link to <strong>' + data.guestEmail + '</strong></p>' +\r\n        '<p style=\"color:#94a3b8;font-size:0.875rem\">Click the link in the email to continue with your waiver.</p>';\r\n    } catch (error) {\r\n      console.error(\"Form submission error:\", error);\r\n      alert(\"Error: \" + error.message);\r\n    }\r\n  };\r\n\r\n  /* ---------- activity checkboxes ------------------------- */\r\n  const actsDiv = document.getElementById('activities');\r\n  const masterCheck = document.getElementById('master');\r\n  let chosen = new Map();\r\n\r\n  function loadActivities() {\r\n    const selectedProp = props.find(p => p.id === (submission ? submission.property_id : propSel.value));\r\n    const activities = selectedProp?.activities ?? [];\r\n\r\n    actsDiv.innerHTML = '';\r\n    chosen.clear();\r\n    masterCheck.disabled = true;\r\n    masterCheck.checked = false;\r\n\r\n    activities.forEach(a => {\r\n      const rowDiv = document.createElement('div');\r\n      rowDiv.className = 'activity-row';\r\n\r\n      const itemDiv = document.createElement('div');\r\n      itemDiv.className = 'activity-item';\r\n\r\n      const checkbox = document.createElement('input');\r\n      checkbox.type = 'checkbox';\r\n      checkbox.id = 'activity-' + a.slug;\r\n      checkbox.value = a.slug;\r\n\r\n      const label = document.createElement('label');\r\n      label.htmlFor = 'activity-' + a.slug;\r\n\r\n      const labelText = document.createElement('span');\r\n      labelText.className = 'activity-label-text';\r\n      labelText.textContent = a.label;\r\n      label.appendChild(labelText);\r\n\r\n      if (a.risk) {\r\n        const chipWrapper = document.createElement('div');\r\n        chipWrapper.className = 'risk-chip-wrapper';\r\n\r\n        const riskChip = document.createElement('span');\r\n        riskChip.className = 'risk-chip risk-' + a.risk;\r\n        riskChip.textContent = a.risk.charAt(0).toUpperCase() + a.risk.slice(1) + ' Risk';\r\n\r\n        const riskDetails = document.createElement('span');\r\n        riskDetails.className = 'risk-details';\r\n\r\n        const riskData = risks[a.risk];\r\n        if (riskData) {\r\n          riskDetails.textContent = riskData.description || 'Activity-specific risks apply';\r\n        } else {\r\n          riskDetails.textContent = 'Activity-specific risks apply';\r\n        }\r\n\r\n        chipWrapper.appendChild(riskChip);\r\n        chipWrapper.appendChild(riskDetails);\r\n        label.appendChild(chipWrapper);\r\n      }\r\n\r\n      const initialInput = document.createElement('input');\r\n      initialInput.type = 'text';\r\n      initialInput.maxLength = 4;\r\n      initialInput.placeholder = 'Initials';\r\n      initialInput.className = 'activity-initial';\r\n      initialInput.dataset.slug = a.slug;\r\n      initialInput.oninput = validateMasterCheckbox;\r\n\r\n      checkbox.onchange = () => {\r\n        if (checkbox.checked) {\r\n          chosen.set(a.slug, {itemDiv, initialInput});\r\n          initialInput.classList.add('visible');\r\n          itemDiv.classList.add('checked');\r\n        } else {\r\n          chosen.delete(a.slug);\r\n          initialInput.classList.remove('visible');\r\n          initialInput.value = '';\r\n          itemDiv.classList.remove('checked');\r\n        }\r\n        validateMasterCheckbox();\r\n      };\r\n\r\n      itemDiv.appendChild(checkbox);\r\n      itemDiv.appendChild(label);\r\n\r\n      itemDiv.onclick = () => {\r\n        checkbox.checked = !checkbox.checked;\r\n        checkbox.onchange();\r\n      };\r\n\r\n      rowDiv.appendChild(itemDiv);\r\n      rowDiv.appendChild(initialInput);\r\n      actsDiv.appendChild(rowDiv);\r\n    });\r\n  }\r\n\r\n  function validateMasterCheckbox() {\r\n    let allFilled = true;\r\n    for (const [slug, {initialInput}] of chosen) {\r\n      if (!initialInput.value.trim()) {\r\n        allFilled = false;\r\n        break;\r\n      }\r\n    }\r\n    masterCheck.disabled = !allFilled || chosen.size === 0;\r\n    if (masterCheck.disabled) {\r\n      masterCheck.checked = false;\r\n    }\r\n  }\r\n\r\n  if (submission) {\r\n    loadActivities();\r\n    validateMasterCheckbox();\r\n  }\r\n\r\n  /* ---------- signature pad -------------------------------- */\r\n  const canvas = document.getElementById('sign');\r\n  const ctx = canvas.getContext('2d', { willReadFrequently: true });\r\n  let drawing = false;\r\n\r\n  canvas.addEventListener('pointerdown', e => {\r\n    drawing = true;\r\n    ctx.moveTo(e.offsetX, e.offsetY);\r\n  });\r\n  canvas.addEventListener('pointermove', e => {\r\n    if (!drawing) return;\r\n    ctx.lineTo(e.offsetX, e.offsetY);\r\n    ctx.stroke();\r\n  });\r\n  canvas.addEventListener('pointerup', () => drawing = false);\r\n  document.getElementById('clearSig').onclick =\r\n    () => ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n  /* ---------- activity form submit --------------------------------------- */\r\n  document.getElementById('activityForm').onsubmit = async e => {\r\n    e.preventDefault();\r\n\r\n    if (!submission) {\r\n      alert('Invalid submission. Please start over.');\r\n      return;\r\n    }\r\n\r\n    const data = {\r\n      submissionId: submission.submission_id,\r\n      activities: [...chosen.keys()],\r\n      initials: Object.fromEntries(\r\n        [...chosen.entries()].map(([slug, {initialInput}]) =>\r\n          [slug, initialInput.value])),\r\n      signature: canvas.toDataURL(),\r\n      accepted: document.getElementById('master').checked\r\n    };\r\n\r\n    console.log(\"Submitting activity form:\", data);\r\n\r\n    try {\r\n      const res = await fetch('/submit/complete', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data)\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        console.error(\"Server error:\", errorText);\r\n        alert(\"Error submitting form: \" + errorText);\r\n        return;\r\n      }\r\n\r\n      const json = await res.json();\r\n      console.log(\"Response data:\", json);\r\n\r\n      document.getElementById('activityForm').hidden = true;\r\n      document.getElementById('thanks').hidden = false;\r\n\r\n      if (json.devMode) {\r\n        let html = '<h2>\u2713 Waivers Generated</h2>';\r\n        html += '<p style=\"color:#64748b;margin-bottom:1.5rem\">Your waivers are ready to download</p>';\r\n        html += '<div style=\"display:flex;flex-direction:column;gap:12px\">';\r\n\r\n        json.downloads.forEach(pdf => {\r\n          html += '<button onclick=\"window.open(&quot;' + pdf.url + '&quot;, &quot;_blank&quot;)\" ';\r\n          html += 'style=\"padding:12px 24px;background:#3b82f6;color:white;border:none;';\r\n          html += 'border-radius:8px;cursor:pointer;font-size:1rem;font-weight:600;';\r\n          html += 'transition:background 0.2s\"';\r\n          html += ' onmouseover=\"this.style.background=&quot;#2563eb&quot;\"';\r\n          html += ' onmouseout=\"this.style.background=&quot;#3b82f6&quot;\">';\r\n          html += '\uD83D\uDCC4 Download ' + pdf.filename + '</button>';\r\n        });\r\n\r\n        html += '</div>';\r\n\r\n        if (json.downloads.length > 1) {\r\n          html += '<button onclick=\"';\r\n          json.downloads.forEach(pdf => {\r\n            html += 'window.open(&quot;' + pdf.url + '&quot;, &quot;_blank&quot;);';\r\n          });\r\n          html += '\" style=\"padding:14px 28px;background:#10b981;color:white;border:none;';\r\n          html += 'border-radius:8px;cursor:pointer;font-size:1rem;font-weight:600;margin-top:12px;';\r\n          html += 'transition:background 0.2s\"';\r\n          html += ' onmouseover=\"this.style.background=&quot;#059669&quot;\"';\r\n          html += ' onmouseout=\"this.style.background=&quot;#10b981&quot;\">';\r\n          html += '\uD83D\uDCE6 Download All (' + json.downloads.length + ' PDFs)</button>';\r\n        }\r\n\r\n        if (json.pin) {\r\n          html += '<div style=\"margin-top:1.5rem;padding:1rem;background:#fef3c7;border:2px solid #fbbf24;border-radius:8px\">';\r\n          html += '<p style=\"margin:0;color:#78350f;font-weight:600\">Archery PIN: <strong>' + json.pin + '</strong></p></div>';\r\n        }\r\n\r\n        html += '<p style=\"margin-top:1.5rem;color:#94a3b8;font-size:0.875rem\">';\r\n        html += '\u26A0\uFE0F Development Mode - PDFs stored locally, not emailed</p>';\r\n\r\n        document.getElementById('thanks').innerHTML = html;\r\n      } else {\r\n        let html = '<h2>\u2713 Success</h2>';\r\n        html += '<p style=\"color:#64748b;margin-bottom:1.5rem\">Your waivers have been sent to your email</p>';\r\n        if (json.pin) {\r\n          html += '<div style=\"margin-top:1.5rem;padding:1rem;background:#fef3c7;border:2px solid #fbbf24;border-radius:8px\">';\r\n          html += '<p style=\"margin:0;color:#78350f;font-weight:600\">Archery PIN: <strong>' + json.pin + '</strong></p></div>';\r\n        }\r\n        document.getElementById('thanks').innerHTML = html;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Form submission error:\", error);\r\n      alert(\"Error submitting form: \" + error.message);\r\n    }\r\n  };\r\n</script>\r\n</body>\r\n</html>`, {\r\n    headers: { 'content-type': 'text/html; charset=utf-8' }\r\n  });\r\n}\r\n", "import { htmlPage } from '../utils/spa.js';\n\nexport async function handleRoot(request, env) {\n  const url = new URL(request.url);\n  const token = url.searchParams.get('token');\n\n  return await htmlPage(env, token);\n}\n", "// In-house nanoid implementation\n// Generates cryptographically secure random IDs\n\nconst urlAlphabet = 'useandom26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict';\n\nexport function nanoid(size = 21) {\n  let id = '';\n  const bytes = crypto.getRandomValues(new Uint8Array(size));\n\n  while (size--) {\n    id += urlAlphabet[bytes[size] & 63];\n  }\n\n  return id;\n}\n\nexport function customAlphabet(alphabet, defaultSize = 21) {\n  return (size = defaultSize) => {\n    let id = '';\n    const mask = (2 << Math.log2(alphabet.length - 1)) - 1;\n    const step = -~((1.6 * mask * size) / alphabet.length);\n\n    while (true) {\n      const bytes = crypto.getRandomValues(new Uint8Array(step));\n      let i = step;\n\n      while (i--) {\n        id += alphabet[bytes[i] & mask] || '';\n        if (id.length >= size) return id;\n      }\n    }\n  };\n}\n", "export const json = (obj, status = 200) =>\r\n  new Response(JSON.stringify(obj), {\r\n    status,\r\n    headers: { 'content-type': 'application/json' }\r\n  });\r\n\r\nexport const bad = msg => json({ ok: false, error: msg }, 400);\r\n\r\nexport async function handleAdmin() {\r\n  const html = `<!doctype html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\r\n  <title>Admin - Activity Waivers</title>\r\n  <style>\r\n    body {\r\n      font-family: system-ui, -apple-system, sans-serif;\r\n      margin: 0;\r\n      padding: 20px;\r\n      background: #f5f5f5;\r\n    }\r\n    .container {\r\n      max-width: 1400px;\r\n      margin: 0 auto;\r\n      background: white;\r\n      padding: 30px;\r\n      border-radius: 8px;\r\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n    }\r\n    h1 {\r\n      margin-top: 0;\r\n      color: #333;\r\n    }\r\n    .tabs {\r\n      display: flex;\r\n      border-bottom: 2px solid #ddd;\r\n      margin-bottom: 30px;\r\n    }\r\n    .tab {\r\n      padding: 12px 24px;\r\n      cursor: pointer;\r\n      border: none;\r\n      background: none;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #666;\r\n      border-bottom: 3px solid transparent;\r\n      transition: all 0.2s;\r\n    }\r\n    .tab:hover {\r\n      color: #0070f3;\r\n    }\r\n    .tab.active {\r\n      color: #0070f3;\r\n      border-bottom-color: #0070f3;\r\n    }\r\n    .tab-content {\r\n      display: none;\r\n    }\r\n    .tab-content.active {\r\n      display: block;\r\n    }\r\n    .search-form {\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n      gap: 15px;\r\n      margin-bottom: 30px;\r\n      padding: 20px;\r\n      background: #f9f9f9;\r\n      border-radius: 8px;\r\n    }\r\n    .form-group {\r\n      display: flex;\r\n      flex-direction: column;\r\n    }\r\n    label {\r\n      font-weight: 600;\r\n      margin-bottom: 5px;\r\n      color: #555;\r\n      font-size: 14px;\r\n    }\r\n    input, select {\r\n      padding: 10px;\r\n      border: 1px solid #ddd;\r\n      border-radius: 4px;\r\n      font-size: 14px;\r\n      width: 100%;\r\n      max-width: 400px;\r\n      box-sizing: border-box;\r\n    }\r\n    input:focus, select:focus {\r\n      outline: none;\r\n      border-color: #0070f3;\r\n    }\r\n    .button-group {\r\n      grid-column: 1 / -1;\r\n      display: flex;\r\n      gap: 10px;\r\n    }\r\n    button {\r\n      padding: 12px 24px;\r\n      border: none;\r\n      border-radius: 4px;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n    }\r\n    .btn-search, .btn-primary {\r\n      background: #0070f3;\r\n      color: white;\r\n    }\r\n    .btn-search:hover, .btn-primary:hover {\r\n      background: #0051cc;\r\n    }\r\n    .btn-clear {\r\n      background: #eee;\r\n      color: #333;\r\n    }\r\n    .btn-clear:hover {\r\n      background: #ddd;\r\n    }\r\n    .btn-danger {\r\n      background: #dc3545;\r\n      color: white;\r\n      padding: 8px 15px;\r\n      font-size: 13px;\r\n      margin-left: 5px;\r\n    }\r\n    .btn-danger:hover {\r\n      background: #c82333;\r\n    }\r\n    .btn-warning {\r\n      background: #ffc107;\r\n      color: #000;\r\n      padding: 8px 15px;\r\n      font-size: 13px;\r\n      margin-left: 5px;\r\n    }\r\n    .btn-warning:hover {\r\n      background: #e0a800;\r\n    }\r\n    .results {\r\n      margin-top: 20px;\r\n    }\r\n    .result-count {\r\n      margin-bottom: 15px;\r\n      color: #666;\r\n      font-size: 14px;\r\n    }\r\n    table {\r\n      width: 100%;\r\n      border-collapse: collapse;\r\n      font-size: 14px;\r\n    }\r\n    thead {\r\n      background: #f9f9f9;\r\n    }\r\n    th {\r\n      text-align: left;\r\n      padding: 12px;\r\n      border-bottom: 2px solid #ddd;\r\n      font-weight: 600;\r\n      color: #555;\r\n    }\r\n    td {\r\n      padding: 12px;\r\n      border-bottom: 1px solid #eee;\r\n    }\r\n    tr:hover {\r\n      background: #f9f9f9;\r\n    }\r\n    .activity-badge {\r\n      display: inline-block;\r\n      padding: 4px 8px;\r\n      margin: 2px;\r\n      background: #e3f2fd;\r\n      color: #1976d2;\r\n      border-radius: 4px;\r\n      font-size: 12px;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n    }\r\n    .activity-badge:hover {\r\n      background: #1976d2;\r\n      color: white;\r\n    }\r\n    .loading {\r\n      text-align: center;\r\n      padding: 40px;\r\n      color: #666;\r\n    }\r\n    .error {\r\n      padding: 15px;\r\n      background: #fee;\r\n      color: #c33;\r\n      border-radius: 4px;\r\n      margin: 20px 0;\r\n    }\r\n    .message {\r\n      padding: 15px;\r\n      border-radius: 4px;\r\n      margin-bottom: 20px;\r\n    }\r\n    .success {\r\n      background: #d4edda;\r\n      color: #155724;\r\n      border: 1px solid #c3e6cb;\r\n    }\r\n    .empty {\r\n      text-align: center;\r\n      padding: 40px;\r\n      color: #999;\r\n    }\r\n    .section {\r\n      margin-bottom: 40px;\r\n      padding: 20px;\r\n      background: #f9f9f9;\r\n      border-radius: 8px;\r\n    }\r\n    h2 {\r\n      margin-top: 0;\r\n      font-size: 20px;\r\n      color: #555;\r\n    }\r\n    .activities-list {\r\n      margin-top: 20px;\r\n    }\r\n    .activity-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 15px;\r\n      background: white;\r\n      border: 1px solid #ddd;\r\n      border-radius: 4px;\r\n      margin-bottom: 10px;\r\n    }\r\n    .activity-info {\r\n      flex: 1;\r\n    }\r\n    .activity-slug {\r\n      font-weight: 600;\r\n      color: #333;\r\n      font-size: 16px;\r\n    }\r\n    .activity-label {\r\n      color: #666;\r\n      margin: 5px 0;\r\n    }\r\n    .risk-badge {\r\n      display: inline-block;\r\n      padding: 4px 12px;\r\n      border-radius: 4px;\r\n      font-size: 12px;\r\n      font-weight: 600;\r\n      margin-top: 5px;\r\n    }\r\n    .risk-low {\r\n      background: #d4edda;\r\n      color: #155724;\r\n    }\r\n    .risk-medium {\r\n      background: #fff3cd;\r\n      color: #856404;\r\n    }\r\n    .risk-high {\r\n      background: #f8d7da;\r\n      color: #721c24;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"container\">\r\n    <h1>Activity Waivers Admin</h1>\r\n\r\n    <div class=\"tabs\">\r\n      <button class=\"tab active\" onclick=\"showTab('search')\">Search Submissions</button>\r\n      <button class=\"tab\" onclick=\"showTab('activities')\">Manage Activities</button>\r\n      <button class=\"tab\" onclick=\"showTab('properties')\">Manage Properties</button>\r\n      <button class=\"tab\" onclick=\"showTab('releases')\">Legal Releases</button>\r\n      <button class=\"tab\" onclick=\"showTab('debug')\">Debug</button>\r\n      <button class=\"tab\" onclick=\"showTab('api')\">API Documentation</button>\r\n    </div>\r\n\r\n    <!-- Search Tab -->\r\n    <div id=\"searchTab\" class=\"tab-content active\">\r\n      <form class=\"search-form\" id=\"searchForm\">\r\n        <div class=\"form-group\">\r\n          <label for=\"name\">Guest Name</label>\r\n          <input type=\"text\" id=\"name\" name=\"name\" placeholder=\"John Doe\">\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">Email</label>\r\n          <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"guest@example.com\">\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"prop\">Property ID</label>\r\n          <input type=\"text\" id=\"prop\" name=\"prop\" placeholder=\"cabin-12\">\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"date\">Check-in Date</label>\r\n          <input type=\"date\" id=\"date\" name=\"date\">\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"activity\">Activity</label>\r\n          <input type=\"text\" id=\"activity\" name=\"activity\" placeholder=\"archery\">\r\n        </div>\r\n\r\n        <div class=\"button-group\">\r\n          <button type=\"submit\" class=\"btn-search\">Search</button>\r\n          <button type=\"button\" class=\"btn-clear\" onclick=\"clearForm()\">Clear</button>\r\n        </div>\r\n      </form>\r\n\r\n      <div class=\"results\" id=\"results\"></div>\r\n    </div>\r\n\r\n    <!-- Activities Tab -->\r\n    <div id=\"activitiesTab\" class=\"tab-content\">\r\n      <div id=\"message\"></div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Property</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"propertySelect\">Select Property</label>\r\n          <select id=\"propertySelect\" onchange=\"loadActivities()\">\r\n            <option value=\"\">Loading...</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Add New Activity</h2>\r\n        <form id=\"addForm\">\r\n          <div class=\"form-group\">\r\n            <label for=\"addSlug\">Slug (e.g., rock-climbing)</label>\r\n            <input type=\"text\" id=\"addSlug\" required placeholder=\"rock-climbing\">\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"addLabel\">Label (Display Name)</label>\r\n            <input type=\"text\" id=\"addLabel\" required placeholder=\"Rock Climbing\">\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"addRisk\">Risk Level</label>\r\n            <select id=\"addRisk\" required>\r\n              <option value=\"low\">Low</option>\r\n              <option value=\"medium\">Medium</option>\r\n              <option value=\"high\">High</option>\r\n            </select>\r\n          </div>\r\n          <button type=\"submit\" class=\"btn-primary\">Add Activity</button>\r\n        </form>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Current Activities</h2>\r\n        <div id=\"activitiesList\" class=\"activities-list\">\r\n          <div class=\"loading\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Properties Tab -->\r\n    <div id=\"propertiesTab\" class=\"tab-content\">\r\n      <div id=\"propMessage\"></div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Add New Property</h2>\r\n        <form id=\"addPropertyForm\">\r\n          <div class=\"form-group\">\r\n            <label for=\"propId\">Property ID (e.g., cabin-12)</label>\r\n            <input type=\"text\" id=\"propId\" required placeholder=\"cabin-12\">\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"propName\">Property Name</label>\r\n            <input type=\"text\" id=\"propName\" required placeholder=\"Cabin 12\">\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"copyDefaultActivities\" style=\"display: flex; align-items: center; gap: 8px; cursor: pointer;\">\r\n              <input type=\"checkbox\" id=\"copyDefaultActivities\" checked style=\"cursor: pointer;\">\r\n              <span>Copy default activities template</span>\r\n            </label>\r\n          </div>\r\n          <button type=\"submit\" class=\"btn-primary\">Add Property</button>\r\n        </form>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Current Properties</h2>\r\n        <div id=\"propertiesList\" class=\"activities-list\">\r\n          <div class=\"loading\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Legal Releases Tab -->\r\n    <div id=\"releasesTab\" class=\"tab-content\">\r\n      <div id=\"releaseMessage\"></div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Current Release</h2>\r\n        <div id=\"currentRelease\" class=\"current-release\">\r\n          <div class=\"loading\">Loading...</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Create New Release</h2>\r\n        <form id=\"releaseForm\">\r\n          <div class=\"form-group\">\r\n            <label for=\"releaseVersion\">Version</label>\r\n            <input type=\"text\" id=\"releaseVersion\" placeholder=\"Leave blank to auto-increment\" pattern=\"[0-9]+\\.[0-9]+\\.[0-9]+\">\r\n            <small style=\"color: #666; margin-top: 5px; display: block;\">Format: X.Y.Z (e.g., 1.0.1) - Leave blank to auto-increment patch version</small>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"waiverText\">Legal Waiver Text</label>\r\n            <textarea id=\"waiverText\" required rows=\"12\" style=\"font-family: system-ui, sans-serif; resize: vertical; min-height: 200px;\"></textarea>\r\n          </div>\r\n          <button type=\"submit\" class=\"btn-primary\">Create Release</button>\r\n        </form>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h2>Release History</h2>\r\n        <div id=\"releaseHistory\" class=\"release-history\">\r\n          <div class=\"loading\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Debug Tab -->\r\n    <div id=\"debugTab\" class=\"tab-content\">\r\n      <div style=\"background: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 4px; margin-bottom: 20px;\">\r\n        <strong>\u26A0\uFE0F Note:</strong> Debug data is cached and auto-updates every 7 days. Click \"Refresh Data\" to force an update.\r\n      </div>\r\n\r\n      <div style=\"margin-bottom: 20px;\">\r\n        <button class=\"btn-primary\" onclick=\"loadDebugData(true)\" style=\"padding: 10px 20px;\">\r\n          \uD83D\uDD04 Refresh Data\r\n        </button>\r\n        <span id=\"debugLastUpdate\" style=\"margin-left: 15px; color: #666; font-size: 14px;\"></span>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h2>KV Store (PROPS_KV)</h2>\r\n        <div id=\"kvData\" style=\"background: #f9f9f9; padding: 15px; border-radius: 4px; overflow-x: auto;\">\r\n          <div class=\"loading\">Loading...</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"section\">\r\n        <h2>D1 Database Tables</h2>\r\n        <div id=\"d1Tables\" style=\"margin-top: 15px;\">\r\n          <div class=\"loading\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- API Documentation Tab -->\r\n    <div id=\"apiTab\" class=\"tab-content\">\r\n      <div style=\"max-width: 900px; margin: 0 auto;\">\r\n        <div style=\"background: white; padding: 30px; border-radius: 8px; line-height: 1.6;\">\r\n          <div id=\"apiDocs\" style=\"font-family: system-ui, sans-serif;\">\r\n            <!-- API documentation will be rendered here -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <script>\r\n    let currentProperties = [];\r\n\r\n    // Tab switching\r\n    function showTab(tabName) {\r\n      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));\r\n      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));\r\n\r\n      const tabs = document.querySelectorAll('.tab');\r\n      tabs.forEach(tab => {\r\n        if (tab.textContent.toLowerCase().includes(tabName === 'search' ? 'search' : tabName === 'activities' ? 'activities' : tabName === 'properties' ? 'properties' : tabName === 'releases' ? 'releases' : tabName === 'debug' ? 'debug' : 'api')) {\r\n          tab.classList.add('active');\r\n        }\r\n      });\r\n      document.getElementById(tabName + 'Tab').classList.add('active');\r\n\r\n      if (tabName === 'activities') {\r\n        loadPropertySelector();\r\n        loadActivities();\r\n      }\r\n      if (tabName === 'properties') {\r\n        loadProperties();\r\n      }\r\n      if (tabName === 'releases') {\r\n        loadReleases();\r\n      }\r\n      if (tabName === 'debug') {\r\n        loadDebugData();\r\n      }\r\n      if (tabName === 'api') {\r\n        loadApiDocs();\r\n      }\r\n    }\r\n\r\n    async function loadPropertySelector() {\r\n      const selector = document.getElementById('propertySelect');\r\n      try {\r\n        const response = await fetch('/admin/properties');\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        currentProperties = data.properties;\r\n        selector.innerHTML = currentProperties.map(p =>\r\n          \\`<option value=\"\\${p.id}\">\\${p.name}</option>\\`\r\n        ).join('');\r\n\r\n      } catch (error) {\r\n        selector.innerHTML = '<option value=\"\">Error loading properties</option>';\r\n      }\r\n    }\r\n\r\n    // Search functionality\r\n    const form = document.getElementById('searchForm');\r\n    const resultsDiv = document.getElementById('results');\r\n\r\n    window.addEventListener('load', () => search());\r\n\r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n      search();\r\n    });\r\n\r\n    async function search() {\r\n      resultsDiv.innerHTML = '<div class=\"loading\">Loading...</div>';\r\n\r\n      const formData = new FormData(form);\r\n      const params = new URLSearchParams();\r\n\r\n      for (const [key, value] of formData) {\r\n        if (value.trim()) {\r\n          params.append(key, value.trim());\r\n        }\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('/admin/search?' + params.toString());\r\n        const data = await response.json();\r\n\r\n        if (!data.rows.success) {\r\n          throw new Error('Search failed');\r\n        }\r\n\r\n        displayResults(data.rows.results);\r\n      } catch (error) {\r\n        resultsDiv.innerHTML = '<div class=\"error\">Error loading results: ' + error.message + '</div>';\r\n      }\r\n    }\r\n\r\n    function displayResults(results) {\r\n      if (results.length === 0) {\r\n        resultsDiv.innerHTML = '<div class=\"empty\">No results found</div>';\r\n        return;\r\n      }\r\n\r\n      const countHtml = '<div class=\"result-count\">Found ' + results.length + ' submission' + (results.length !== 1 ? 's' : '') + '</div>';\r\n\r\n      const tableHtml = \\`\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Date</th>\r\n              <th>Guest Name</th>\r\n              <th>Email</th>\r\n              <th>Property</th>\r\n              <th>Check-in</th>\r\n              <th>Activities</th>\r\n              <th>Download</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            \\${results.map(row => {\r\n              const createdDate = new Date(row.created_at).toLocaleString();\r\n              const activities = JSON.parse(row.activities);\r\n\r\n              return \\`\r\n                <tr>\r\n                  <td>\\${createdDate}</td>\r\n                  <td>\\${escapeHtml(row.guest_name)}</td>\r\n                  <td>\\${escapeHtml(row.guest_email)}</td>\r\n                  <td>\\${escapeHtml(row.property_id)}</td>\r\n                  <td>\\${row.checkin_date}</td>\r\n                  <td>\r\n                    \\${activities.map(a =>\r\n                      '<span class=\"activity-badge\">' +\r\n                      escapeHtml(a) + '</span>'\r\n                    ).join('')}\r\n                  </td>\r\n                  <td>\r\n                    <button class=\"btn-primary\" onclick=\"downloadAllWaivers('\\${escapeHtml(row.submission_id)}')\" style=\"padding: 8px 12px; font-size: 13px;\">Download All</button>\r\n                  </td>\r\n                </tr>\r\n              \\`;\r\n            }).join('')}\r\n          </tbody>\r\n        </table>\r\n      \\`;\r\n\r\n      resultsDiv.innerHTML = countHtml + tableHtml;\r\n    }\r\n\r\n    function clearForm() {\r\n      form.reset();\r\n      search();\r\n    }\r\n\r\n    function escapeHtml(text) {\r\n      const div = document.createElement('div');\r\n      div.textContent = text;\r\n      return div.innerHTML;\r\n    }\r\n\r\n    // Activities Management\r\n    const messageDiv = document.getElementById('message');\r\n    const activitiesList = document.getElementById('activitiesList');\r\n\r\n    function showMessage(text, type = 'success') {\r\n      messageDiv.innerHTML = \\`<div class=\"message \\${type}\">\\${text}</div>\\`;\r\n      setTimeout(() => messageDiv.innerHTML = '', 5000);\r\n    }\r\n\r\n    async function loadActivities() {\r\n      const selector = document.getElementById('propertySelect');\r\n      const propertyId = selector.value;\r\n\r\n      if (!propertyId) return;\r\n\r\n      try {\r\n        const response = await fetch(\\`/admin/activities?property=\\${propertyId}\\`);\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        displayActivities(data.activities);\r\n      } catch (error) {\r\n        activitiesList.innerHTML = \\`<div class=\"error\">Error loading activities: \\${error.message}</div>\\`;\r\n      }\r\n    }\r\n\r\n    function displayActivities(activities) {\r\n      if (activities.length === 0) {\r\n        activitiesList.innerHTML = '<p>No activities found.</p>';\r\n        return;\r\n      }\r\n\r\n      activitiesList.innerHTML = activities.map(activity => \\`\r\n        <div class=\"activity-item\">\r\n          <div class=\"activity-info\">\r\n            <div class=\"activity-slug\">\\${activity.slug}</div>\r\n            <div class=\"activity-label\">\\${activity.label}</div>\r\n            <span class=\"risk-badge risk-\\${activity.risk}\">\\${activity.risk.toUpperCase()}</span>\r\n          </div>\r\n          <div class=\"activity-actions\">\r\n            <button class=\"btn-warning\" onclick=\"editActivity('\\${activity.slug}', '\\${activity.label}', '\\${activity.risk}')\">Edit</button>\r\n            <button class=\"btn-danger\" onclick=\"removeActivity('\\${activity.slug}')\">Remove</button>\r\n          </div>\r\n        </div>\r\n      \\`).join('');\r\n    }\r\n\r\n    document.getElementById('addForm').addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n\r\n      const selector = document.getElementById('propertySelect');\r\n      const propertyId = selector.value;\r\n\r\n      if (!propertyId) {\r\n        showMessage('Please select a property first', 'error');\r\n        return;\r\n      }\r\n\r\n      const slug = document.getElementById('addSlug').value.trim();\r\n      const label = document.getElementById('addLabel').value.trim();\r\n      const risk = document.getElementById('addRisk').value;\r\n\r\n      try {\r\n        const response = await fetch(\\`/admin/activities/add?property=\\${propertyId}\\`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ slug, label, risk })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        showMessage(\\`Activity \"\\${label}\" added successfully!\\`);\r\n        document.getElementById('addForm').reset();\r\n        loadActivities();\r\n      } catch (error) {\r\n        showMessage(error.message, 'error');\r\n      }\r\n    });\r\n\r\n    async function removeActivity(slug) {\r\n      if (!confirm(\\`Remove activity \"\\${slug}\"?\\`)) return;\r\n\r\n      const selector = document.getElementById('propertySelect');\r\n      const propertyId = selector.value;\r\n\r\n      try {\r\n        const response = await fetch(\\`/admin/activities/remove?property=\\${propertyId}\\`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ slug })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        showMessage(\\`Activity \"\\${slug}\" removed successfully!\\`);\r\n        loadActivities();\r\n      } catch (error) {\r\n        showMessage(error.message, 'error');\r\n      }\r\n    }\r\n\r\n    function editActivity(slug, currentLabel, currentRisk) {\r\n      const newLabel = prompt('Enter new label:', currentLabel);\r\n      if (newLabel === null) return;\r\n\r\n      const newRisk = prompt('Enter risk level (low/medium/high):', currentRisk);\r\n      if (newRisk === null) return;\r\n\r\n      if (!['low', 'medium', 'high'].includes(newRisk.toLowerCase())) {\r\n        showMessage('Invalid risk level. Must be low, medium, or high.', 'error');\r\n        return;\r\n      }\r\n\r\n      updateActivity(slug, newLabel, newRisk.toLowerCase());\r\n    }\r\n\r\n    async function updateActivity(slug, label, risk) {\r\n      const selector = document.getElementById('propertySelect');\r\n      const propertyId = selector.value;\r\n\r\n      try {\r\n        const response = await fetch(\\`/admin/activities/update?property=\\${propertyId}\\`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ slug, label, risk })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        showMessage(\\`Activity \"\\${slug}\" updated successfully!\\`);\r\n        loadActivities();\r\n      } catch (error) {\r\n        showMessage(error.message, 'error');\r\n      }\r\n    }\r\n\r\n    // Properties Management\r\n    const propMessageDiv = document.getElementById('propMessage');\r\n    const propertiesList = document.getElementById('propertiesList');\r\n\r\n    function showPropMessage(text, type = 'success') {\r\n      propMessageDiv.innerHTML = \\`<div class=\"message \\${type}\">\\${text}</div>\\`;\r\n      setTimeout(() => propMessageDiv.innerHTML = '', 5000);\r\n    }\r\n\r\n    async function loadProperties() {\r\n      try {\r\n        const response = await fetch('/admin/properties');\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        displayProperties(data.properties);\r\n      } catch (error) {\r\n        propertiesList.innerHTML = \\`<div class=\"error\">Error loading properties: \\${error.message}</div>\\`;\r\n      }\r\n    }\r\n\r\n    function displayProperties(properties) {\r\n      if (properties.length === 0) {\r\n        propertiesList.innerHTML = '<p>No properties found.</p>';\r\n        return;\r\n      }\r\n\r\n      propertiesList.innerHTML = properties.map(property => \\`\r\n        <div class=\"activity-item\">\r\n          <div class=\"activity-info\">\r\n            <div class=\"activity-slug\">\\${property.id}</div>\r\n            <div class=\"activity-label\">\\${property.name}</div>\r\n          </div>\r\n          <div class=\"activity-actions\">\r\n            <button class=\"btn-danger\" onclick=\"removeProperty('\\${property.id}')\">Remove</button>\r\n          </div>\r\n        </div>\r\n      \\`).join('');\r\n    }\r\n\r\n    document.getElementById('addPropertyForm').addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n\r\n      const id = document.getElementById('propId').value.trim();\r\n      const name = document.getElementById('propName').value.trim();\r\n      const copyDefaults = document.getElementById('copyDefaultActivities').checked;\r\n\r\n      try {\r\n        const response = await fetch('/admin/properties/add', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ id, name, copyDefaultActivities: copyDefaults })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        showPropMessage(\\`Property \"\\${name}\" added successfully!\\`);\r\n        document.getElementById('addPropertyForm').reset();\r\n        document.getElementById('copyDefaultActivities').checked = true;\r\n        loadProperties();\r\n      } catch (error) {\r\n        showPropMessage(error.message, 'error');\r\n      }\r\n    });\r\n\r\n    async function removeProperty(id) {\r\n      if (!confirm(\\`Remove property \"\\${id}\"?\\`)) return;\r\n\r\n      try {\r\n        const response = await fetch('/admin/properties/remove', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ id })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        showPropMessage(\\`Property \"\\${id}\" removed successfully!\\`);\r\n        loadProperties();\r\n      } catch (error) {\r\n        showPropMessage(error.message, 'error');\r\n      }\r\n    }\r\n\r\n    // Hash verification only\r\n    async function verifyDocumentHash(submissionId, activity) {\r\n      try {\r\n        const docResponse = await fetch('/admin/document?submission=' + submissionId + '&activity=' + activity);\r\n        const docData = await docResponse.json();\r\n\r\n        if (!docData.ok) {\r\n          alert('Error: ' + docData.error);\r\n          return;\r\n        }\r\n\r\n        const verifyResponse = await fetch('/admin/verify?document=' + docData.document_id);\r\n        const verifyData = await verifyResponse.json();\r\n\r\n        if (!verifyData.ok) {\r\n          alert('Error: ' + verifyData.error);\r\n          return;\r\n        }\r\n\r\n        if (verifyData.verified) {\r\n          alert('\u2713 Hash Verified Successfully\\\\n\\\\nDocument ID: ' + docData.document_id + '\\\\nStored Hash: ' + verifyData.stored_hash.substring(0, 16) + '...\\\\nComputed Hash: ' + verifyData.computed_hash.substring(0, 16) + '...');\r\n        } else {\r\n          alert('\u2717 Hash Verification Failed\\\\n\\\\nDocument may have been tampered with\\\\nDocument ID: ' + docData.document_id + '\\\\nStored Hash: ' + verifyData.stored_hash.substring(0, 16) + '...\\\\nComputed Hash: ' + verifyData.computed_hash.substring(0, 16) + '...');\r\n        }\r\n      } catch (error) {\r\n        alert('Error verifying hash: ' + error.message);\r\n      }\r\n    }\r\n\r\n    async function downloadAllWaivers(submissionId) {\r\n      window.location.href = '/admin/download-all?submission=' + submissionId;\r\n    }\r\n\r\n    // Legal Releases functionality\r\n    async function loadReleases() {\r\n      const currentReleaseDiv = document.getElementById('currentRelease');\r\n      const historyDiv = document.getElementById('releaseHistory');\r\n\r\n      try {\r\n        const response = await fetch('/admin/releases');\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        // Display current release\r\n        if (data.current) {\r\n          const rel = data.current;\r\n          currentReleaseDiv.innerHTML = \\`\r\n            <div style=\"padding: 15px; background: #f0f9ff; border-left: 4px solid #0070f3; border-radius: 4px;\">\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\r\n                <strong style=\"font-size: 18px;\">Version \\${rel.version}</strong>\r\n                <span style=\"color: #666; font-size: 14px;\">\\${new Date(rel.release_date).toLocaleDateString()}</span>\r\n              </div>\r\n              <div style=\"white-space: pre-wrap; font-size: 14px; line-height: 1.6; color: #333; margin-top: 10px;\">\\${rel.waiver_text}</div>\r\n            </div>\r\n          \\`;\r\n        } else {\r\n          currentReleaseDiv.innerHTML = '<div class=\"empty\">No releases yet. Create the first release below.</div>';\r\n        }\r\n\r\n        // Display history\r\n        if (data.releases && data.releases.length > 0) {\r\n          historyDiv.innerHTML = data.releases.map(rel => \\`\r\n            <div style=\"padding: 12px; background: #fafafa; border: 1px solid #e0e0e0; border-radius: 4px; margin-bottom: 10px;\">\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n                <strong>Version \\${rel.version}</strong>\r\n                <span style=\"color: #666; font-size: 13px;\">\\${new Date(rel.release_date).toLocaleDateString()}</span>\r\n              </div>\r\n              <div style=\"white-space: pre-wrap; font-size: 13px; line-height: 1.5; color: #555; margin-top: 8px; max-height: 100px; overflow-y: auto;\">\\${rel.waiver_text}</div>\r\n            </div>\r\n          \\`).join('');\r\n        } else {\r\n          historyDiv.innerHTML = '<div class=\"empty\">No release history</div>';\r\n        }\r\n\r\n        // Populate form with current waiver text\r\n        if (data.current) {\r\n          document.getElementById('waiverText').value = data.current.waiver_text;\r\n        }\r\n      } catch (error) {\r\n        currentReleaseDiv.innerHTML = '<div class=\"error\">Error loading releases: ' + error.message + '</div>';\r\n        historyDiv.innerHTML = '';\r\n      }\r\n    }\r\n\r\n    document.getElementById('releaseForm').addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n\r\n      const version = document.getElementById('releaseVersion').value.trim();\r\n      const waiverText = document.getElementById('waiverText').value.trim();\r\n\r\n      try {\r\n        const response = await fetch('/admin/releases/create', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ version: version || null, waiver_text: waiverText })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        showReleaseMessage(\\`Release version \\${data.version} created successfully!\\`);\r\n        document.getElementById('releaseVersion').value = '';\r\n        loadReleases();\r\n      } catch (error) {\r\n        showReleaseMessage(error.message, 'error');\r\n      }\r\n    });\r\n\r\n    function showReleaseMessage(msg, type = 'success') {\r\n      const div = document.getElementById('releaseMessage');\r\n      div.innerHTML = \\`<div class=\"\\${type === 'error' ? 'error' : 'success'}\">\\${msg}</div>\\`;\r\n      setTimeout(() => div.innerHTML = '', 5000);\r\n    }\r\n\r\n    // Debug functionality\r\n    async function loadDebugData(forceRefresh = false) {\r\n      const kvDataDiv = document.getElementById('kvData');\r\n      const d1TablesDiv = document.getElementById('d1Tables');\r\n      const lastUpdateSpan = document.getElementById('debugLastUpdate');\r\n\r\n      try {\r\n        kvDataDiv.innerHTML = '<div class=\"loading\">Loading KV data...</div>';\r\n        d1TablesDiv.innerHTML = '<div class=\"loading\">Loading D1 tables...</div>';\r\n\r\n        const response = await fetch('/admin/debug' + (forceRefresh ? '?refresh=true' : ''));\r\n        const data = await response.json();\r\n\r\n        if (!data.ok) {\r\n          throw new Error(data.error);\r\n        }\r\n\r\n        // Display last update time\r\n        const lastUpdate = new Date(data.lastUpdate);\r\n        lastUpdateSpan.textContent = 'Last updated: ' + lastUpdate.toLocaleString();\r\n\r\n        // Display KV data\r\n        let kvHtml = '<h3>All KV Keys</h3>';\r\n        if (data.kv && Object.keys(data.kv).length > 0) {\r\n          for (const [key, value] of Object.entries(data.kv)) {\r\n            kvHtml += '<div style=\"margin-bottom: 20px; padding: 15px; background: white; border: 1px solid #ddd; border-radius: 4px;\">';\r\n            kvHtml += '<strong style=\"color: #0070f3; font-family: monospace;\">' + escapeHtml(key) + '</strong>';\r\n            kvHtml += '<pre style=\"margin: 10px 0 0 0; padding: 10px; background: #f5f5f5; border-radius: 4px; overflow-x: auto; font-size: 12px;\">' + escapeHtml(JSON.stringify(value, null, 2)) + '</pre>';\r\n            kvHtml += '</div>';\r\n          }\r\n        } else {\r\n          kvHtml += '<p style=\"color: #666;\">No KV data found</p>';\r\n        }\r\n        kvDataDiv.innerHTML = kvHtml;\r\n\r\n        // Display D1 tables\r\n        let d1Html = '';\r\n        if (data.d1 && Object.keys(data.d1).length > 0) {\r\n          for (const [tableName, tableData] of Object.entries(data.d1)) {\r\n            d1Html += '<div style=\"margin-bottom: 30px;\">';\r\n            d1Html += '<h3 style=\"margin-bottom: 10px;\">' + escapeHtml(tableName) + ' (' + tableData.count + ' rows)</h3>';\r\n\r\n            if (tableData.rows && tableData.rows.length > 0) {\r\n              d1Html += '<div style=\"overflow-x: auto;\">';\r\n              d1Html += '<table style=\"width: 100%; border-collapse: collapse; background: white;\">';\r\n\r\n              // Table headers\r\n              d1Html += '<thead><tr>';\r\n              const columns = Object.keys(tableData.rows[0]);\r\n              columns.forEach(col => {\r\n                d1Html += '<th style=\"padding: 10px; text-align: left; background: #f5f5f5; border: 1px solid #ddd; font-weight: 600;\">' + escapeHtml(col) + '</th>';\r\n              });\r\n              d1Html += '</tr></thead>';\r\n\r\n              // Table rows (limit to first 50 rows)\r\n              d1Html += '<tbody>';\r\n              tableData.rows.slice(0, 50).forEach(row => {\r\n                d1Html += '<tr>';\r\n                columns.forEach(col => {\r\n                  let value = row[col];\r\n                  if (value === null) value = '<em style=\"color: #999;\">null</em>';\r\n                  else if (typeof value === 'object') value = JSON.stringify(value);\r\n                  else value = escapeHtml(String(value));\r\n                  d1Html += '<td style=\"padding: 10px; border: 1px solid #ddd; font-size: 13px;\">' + value + '</td>';\r\n                });\r\n                d1Html += '</tr>';\r\n              });\r\n              d1Html += '</tbody>';\r\n              d1Html += '</table>';\r\n              d1Html += '</div>';\r\n\r\n              if (tableData.count > 50) {\r\n                d1Html += '<p style=\"margin-top: 10px; color: #666; font-size: 13px;\"><em>Showing first 50 of ' + tableData.count + ' rows</em></p>';\r\n              }\r\n            } else {\r\n              d1Html += '<p style=\"color: #666;\">No data in this table</p>';\r\n            }\r\n            d1Html += '</div>';\r\n          }\r\n        } else {\r\n          d1Html += '<p style=\"color: #666;\">No D1 tables found</p>';\r\n        }\r\n        d1TablesDiv.innerHTML = d1Html;\r\n\r\n      } catch (error) {\r\n        kvDataDiv.innerHTML = '<div class=\"error\">Error loading KV data: ' + escapeHtml(error.message) + '</div>';\r\n        d1TablesDiv.innerHTML = '<div class=\"error\">Error loading D1 data: ' + escapeHtml(error.message) + '</div>';\r\n      }\r\n    }\r\n\r\n    // API Documentation functionality\r\n    function loadApiDocs() {\r\n      const apiDocsDiv = document.getElementById('apiDocs');\r\n      apiDocsDiv.innerHTML = \\`<div class=\"loading\">Loading API documentation...</div>\\`;\r\n\r\n      fetch('/admin/api-docs')\r\n        .then(response => response.text())\r\n        .then(markdown => {\r\n          apiDocsDiv.innerHTML = convertMarkdownToHTML(markdown);\r\n        })\r\n        .catch(error => {\r\n          apiDocsDiv.innerHTML = '<div class=\"error\">Error loading API documentation</div>';\r\n        });\r\n    }\r\n\r\n    // Simple markdown to HTML converter\r\n    function convertMarkdownToHTML(markdown) {\r\n      let html = markdown\r\n        // Escape HTML\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;')\r\n        // Headers\r\n        .replace(/^### (.+)$/gm, '<h3 style=\"margin-top: 30px; color: #333;\">$1</h3>')\r\n        .replace(/^## (.+)$/gm, '<h2 style=\"margin-top: 40px; color: #0070f3; border-bottom: 2px solid #0070f3; padding-bottom: 10px;\">$1</h2>')\r\n        .replace(/^# (.+)$/gm, '<h1 style=\"color: #0070f3;\">$1</h1>')\r\n        // Bold\r\n        .replace(/\\\\*\\\\*(.+?)\\\\*\\\\*/g, '<strong>$1</strong>')\r\n        // Code blocks\r\n        .replace(/\\`\\`\\`(\\\\w+)?\\\\n([\\\\s\\\\S]*?)\\`\\`\\`/g, '<pre style=\"background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; border: 1px solid #ddd;\"><code>$2</code></pre>')\r\n        // Inline code\r\n        .replace(/\\`([^\\`]+)\\`/g, '<code style=\"background: #f5f5f5; padding: 2px 6px; border-radius: 3px; font-family: monospace; font-size: 0.9em;\">$1</code>')\r\n        // Horizontal rule\r\n        .replace(/^---$/gm, '<hr style=\"margin: 30px 0; border: none; border-top: 1px solid #ddd;\">')\r\n        // Lists\r\n        .replace(/^- (.+)$/gm, '<li style=\"margin: 5px 0;\">$1</li>')\r\n        // Wrap consecutive list items\r\n        .replace(/(<li[^>]*>.*<\\\\/li>\\\\n?)+/g, '<ul style=\"margin: 10px 0; padding-left: 30px;\">$&</ul>')\r\n        // Paragraphs\r\n        .replace(/^(?!<[h|u|p|l|d|c])(\\\\S.*)$/gm, '<p style=\"margin: 10px 0;\">$1</p>');\r\n\r\n      return html;\r\n    }\r\n  </script>\r\n</body>\r\n</html>`;\r\n\r\n  return new Response(html, {\r\n    headers: { 'Content-Type': 'text/html; charset=utf-8' }\r\n  });\r\n}\r\n", "export function validateSubmission(data) {\n  const must = ['propertyId','checkinDate','guestName','guestEmail',\n                'activities','initials','signature','accepted'];\n\n  for (const k of must) {\n    if (data[k] === undefined || data[k] === '' ||\n        (Array.isArray(data[k]) && !data[k].length)) {\n      return `missing ${k}`;\n    }\n  }\n\n  if (data.accepted !== true) {\n    return 'master acceptance not ticked';\n  }\n\n  return null;\n}\n", "export async function saveSubmission(env, subId, data, createdAt) {\n  await env.waivers.prepare(\n      'INSERT INTO submissions VALUES(?1,?2,?3,?4,?5,?6,?7)'\n    ).bind(\n      subId, createdAt, data.propertyId, data.checkinDate,\n      data.guestName, data.guestEmail, JSON.stringify(data.activities)\n    ).run();\n}\n\nexport async function saveDocuments(env, subId, pdfInfos) {\n  const now = new Date().toISOString();\n\n  for (const p of pdfInfos) {\n    // Insert document\n    await env.waivers.prepare(\n        'INSERT INTO documents VALUES(?1,?2,?3,?4,?5)'\n      ).bind(p.id, subId, p.activity, p.r2Key, p.initials).run();\n\n    // Insert hash\n    const hashId = `hash_${p.id}`;\n    await env.waivers.prepare(\n        'INSERT INTO hashes VALUES(?1,?2,?3,?4)'\n      ).bind(hashId, p.id, p.hash, now).run();\n  }\n}\n", "import { nanoid } from '../utils/nanoid.js';\n\nasync function generateDocumentHash(data) {\n  const hashInput = JSON.stringify({\n    submission_id: data.submission_id,\n    property_id: data.property_id,\n    checkin_date: data.checkin_date,\n    guest_name: data.guest_name,\n    guest_email: data.guest_email,\n    activity: data.activity,\n    activity_label: data.activity_label,\n    initials: data.initials,\n    signature_key: data.signature_key,\n    created_at: data.created_at,\n    release_version: data.release_version,\n    release_date: data.release_date\n  });\n\n  const encoder = new TextEncoder();\n  const dataBuffer = encoder.encode(hashInput);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n\n  return hashHex;\n}\n\nfunction generateWaiverHTML(data, activityInfo, riskData, latestRelease, documentId, documentHash) {\n  const riskLevel = activityInfo?.risk || 'medium';\n\n  return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <style>\n    @page {\n      size: A4;\n      margin: 1in;\n    }\n\n    body {\n      font-family: 'Helvetica', 'Arial', sans-serif;\n      font-size: 11pt;\n      line-height: 1.6;\n      color: #000;\n      margin: 0;\n      padding: 20px;\n    }\n\n    h1 {\n      font-size: 20pt;\n      font-weight: bold;\n      margin-bottom: 30px;\n      text-transform: uppercase;\n    }\n\n    .details {\n      margin-bottom: 30px;\n      line-height: 2;\n    }\n\n    .risk-section {\n      margin: 30px 0;\n    }\n\n    .risk-level {\n      font-weight: bold;\n      font-size: 12pt;\n      margin-bottom: 10px;\n    }\n\n    .risk-description {\n      color: #4a4a4a;\n      font-size: 10pt;\n      margin-bottom: 20px;\n    }\n\n    .waiver-section {\n      margin: 30px 0;\n    }\n\n    .waiver-title {\n      font-weight: bold;\n      font-size: 12pt;\n      margin-bottom: 10px;\n    }\n\n    .waiver-text {\n      font-size: 9pt;\n      line-height: 1.5;\n      white-space: pre-wrap;\n    }\n\n    .signature-section {\n      margin-top: 40px;\n      page-break-inside: avoid;\n    }\n\n    .signature-label {\n      font-size: 12pt;\n      margin-bottom: 10px;\n    }\n\n    .signature-image {\n      max-width: 400px;\n      max-height: 150px;\n    }\n\n    .footer {\n      position: fixed;\n      bottom: 0.5in;\n      right: 1in;\n      text-align: right;\n      font-size: 7pt;\n      color: #808080;\n      line-height: 1.4;\n    }\n  </style>\n</head>\n<body>\n  <h1>${data.activity.toUpperCase()} \u2014 Release of Liability</h1>\n\n  <div class=\"details\">\n    Property  : ${data.propertyId}<br>\n    Check-in  : ${data.checkinDate}<br>\n    Guest     : ${data.guestName}<br>\n    Initials  : ${data.initials[data.activity]}\n  </div>\n\n  <div class=\"risk-section\">\n    <div class=\"risk-level\">Risk Level: ${riskLevel.toUpperCase()}</div>\n    ${riskData?.description ? `<div class=\"risk-description\">${riskData.description}</div>` : ''}\n  </div>\n\n  <div class=\"waiver-section\">\n    <div class=\"waiver-title\">Waiver and Release:</div>\n    <div class=\"waiver-text\">${latestRelease.waiver_text}</div>\n  </div>\n\n  <div class=\"signature-section\">\n    <div class=\"signature-label\">Signature:</div>\n    ${data.signature ? `<img src=\"${data.signature}\" class=\"signature-image\" />` : '<p style=\"color: #808080;\">No signature provided</p>'}\n  </div>\n\n  <div class=\"footer\">\n    Legal Version ${latestRelease.version} (${latestRelease.release_date}) \u2022 Document ID: ${documentId}<br>\n    Verification Hash: ${documentHash.substring(0, 32)}...\n  </div>\n</body>\n</html>`;\n}\n\nexport async function makePDFs(data, subId, env) {\n  const now = new Date();\n  const createdAt = now.toISOString();\n  const y = now.getUTCFullYear();\n  const m = String(now.getUTCMonth() + 1).padStart(2, '0');\n  const d = String(now.getUTCDate()).padStart(2, '0');\n\n  // Fetch latest legal release\n  const latestRelease = await env.waivers.prepare(\n    'SELECT version, release_date, waiver_text FROM releases ORDER BY release_date DESC, version DESC LIMIT 1'\n  ).first();\n\n  if (!latestRelease) {\n    throw new Error('No legal release found. Please create a release in the admin panel first.');\n  }\n\n  // Fetch activity info from database\n  const activitiesResult = await env.waivers.prepare(\n    'SELECT slug, label, risk FROM activities WHERE property_id = ?'\n  ).bind(data.propertyId).all();\n  const activities = activitiesResult.results || [];\n\n  // Fetch risk descriptions from database\n  const risksResult = await env.waivers.prepare(\n    'SELECT level, description FROM risk_descriptions'\n  ).all();\n  const risks = {};\n  for (const row of (risksResult.results || [])) {\n    risks[row.level] = { description: row.description };\n  }\n\n  // Save signature to R2 (once per submission, not per activity)\n  let signatureKey = null;\n  if (data.signature) {\n    try {\n      const signatureData = data.signature.split(',')[1];\n      const signatureBytes = Uint8Array.from(atob(signatureData), c => c.charCodeAt(0));\n\n      const nameParts = data.guestName.trim().split(/\\s+/);\n      const firstName = nameParts[0]?.toLowerCase().replace(/[^a-z]/g, '') || 'unknown';\n      const lastName = nameParts.length > 1\n        ? nameParts[nameParts.length - 1].toLowerCase().replace(/[^a-z]/g, '')\n        : 'unknown';\n\n      signatureKey = `waivers/${y}/${m}/${d}/${data.propertyId}/signatures/${lastName}-${firstName}-${subId}.png`;\n\n      await env.WAIVERS_R2.put(signatureKey, signatureBytes, {\n        httpMetadata: { contentType: 'image/png' }\n      });\n    } catch (err) {\n      console.error('Error saving signature to R2:', err);\n    }\n  }\n\n  const results = [];\n\n  for (const act of data.activities) {\n    const activityInfo = activities.find(a => a.slug === act);\n    const riskLevel = activityInfo?.risk || 'medium';\n    const riskData = risks[riskLevel];\n\n    const nameParts = data.guestName.trim().split(/\\s+/);\n    const firstName = nameParts[0]?.toLowerCase().replace(/[^a-z]/g, '') || 'unknown';\n    const lastName = nameParts.length > 1\n      ? nameParts[nameParts.length - 1].toLowerCase().replace(/[^a-z]/g, '')\n      : 'unknown';\n\n    const documentId = nanoid(12);\n\n    const hashData = {\n      submission_id: subId,\n      property_id: data.propertyId,\n      checkin_date: data.checkinDate,\n      guest_name: data.guestName,\n      guest_email: data.guestEmail,\n      activity: act,\n      activity_label: activityInfo?.label || act,\n      initials: data.initials[act],\n      signature_key: signatureKey,\n      created_at: createdAt,\n      release_version: latestRelease.version,\n      release_date: latestRelease.release_date\n    };\n\n    const documentHash = await generateDocumentHash(hashData);\n\n    // Generate HTML for this activity\n    const htmlContent = generateWaiverHTML(\n      { ...data, activity: act },\n      activityInfo,\n      riskData,\n      latestRelease,\n      documentId,\n      documentHash\n    );\n\n    // Use Cloudflare Browser Rendering to generate PDF\n    let pdfBytes;\n    try {\n      const browser = await env.BROWSER.launch();\n      const page = await browser.newPage();\n      await page.setContent(htmlContent, { waitUntil: 'networkidle' });\n\n      pdfBytes = await page.pdf({\n        format: 'A4',\n        printBackground: true,\n        margin: {\n          top: '1in',\n          right: '1in',\n          bottom: '1in',\n          left: '1in'\n        }\n      });\n\n      await browser.close();\n    } catch (err) {\n      console.error('Error generating PDF with browser rendering:', err);\n      throw new Error(`Failed to generate PDF for activity ${act}: ${err.message}`);\n    }\n\n    // Save to R2\n    const filename = `${lastName}-${firstName}-${subId}.pdf`;\n    const key = `waivers/${y}/${m}/${d}/${data.propertyId}/${act}/${lastName}-${firstName}-${subId}.pdf`;\n\n    await env.WAIVERS_R2.put(key, pdfBytes, {\n      httpMetadata: { contentType: 'application/pdf' }\n    });\n\n    results.push({\n      id: documentId,\n      activity: act,\n      filename,\n      r2Key: key,\n      bytes: pdfBytes,\n      hash: documentHash,\n      initials: data.initials[act]\n    });\n  }\n\n  return results;\n}\n", "var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// package.json\nvar version = \"6.1.1\";\n\n// src/common/utils/build-pagination-query.ts\nfunction buildPaginationQuery(options) {\n  const searchParams = new URLSearchParams();\n  if (options.limit !== void 0) {\n    searchParams.set(\"limit\", options.limit.toString());\n  }\n  if (\"after\" in options && options.after !== void 0) {\n    searchParams.set(\"after\", options.after);\n  }\n  if (\"before\" in options && options.before !== void 0) {\n    searchParams.set(\"before\", options.before);\n  }\n  return searchParams.toString();\n}\n\n// src/api-keys/api-keys.ts\nvar ApiKeys = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        \"/api-keys\",\n        payload,\n        options\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/api-keys?${queryString}` : \"/api-keys\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/api-keys/${id}`\n      );\n      return data;\n    });\n  }\n};\n\n// src/audiences/audiences.ts\nvar Audiences = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        \"/audiences\",\n        payload,\n        options\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/audiences?${queryString}` : \"/audiences\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/audiences/${id}`\n      );\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/audiences/${id}`\n      );\n      return data;\n    });\n  }\n};\n\n// src/common/utils/parse-email-to-api-options.ts\nfunction parseAttachments(attachments) {\n  return attachments == null ? void 0 : attachments.map((attachment) => ({\n    content: attachment.content,\n    filename: attachment.filename,\n    path: attachment.path,\n    content_type: attachment.contentType,\n    content_id: attachment.contentId\n  }));\n}\nfunction parseEmailToApiOptions(email) {\n  return {\n    attachments: parseAttachments(email.attachments),\n    bcc: email.bcc,\n    cc: email.cc,\n    from: email.from,\n    headers: email.headers,\n    html: email.html,\n    reply_to: email.replyTo,\n    scheduled_at: email.scheduledAt,\n    subject: email.subject,\n    tags: email.tags,\n    text: email.text,\n    to: email.to\n  };\n}\n\n// src/render.ts\nfunction render(node) {\n  return new Promise((resolve, reject) => {\n    import(\"@react-email/render\").then(({ render: render2 }) => {\n      resolve(render2(node));\n    }).catch(() => {\n      reject(\n        Error(\n          \"Failed to render React component. Make sure to install `@react-email/render`\"\n        )\n      );\n    });\n  });\n}\n\n// src/batch/batch.ts\nvar Batch = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  send(payload, options) {\n    return __async(this, null, function* () {\n      return this.create(payload, options);\n    });\n  }\n  create(payload, options) {\n    return __async(this, null, function* () {\n      var _a;\n      const emails = [];\n      for (const email of payload) {\n        if (email.react) {\n          email.html = yield render(email.react);\n          email.react = void 0;\n        }\n        emails.push(parseEmailToApiOptions(email));\n      }\n      const data = yield this.resend.post(\n        \"/emails/batch\",\n        emails,\n        __spreadProps(__spreadValues({}, options), {\n          headers: __spreadValues({\n            \"x-batch-validation\": (_a = options == null ? void 0 : options.batchValidation) != null ? _a : \"strict\"\n          }, options == null ? void 0 : options.headers)\n        })\n      );\n      return data;\n    });\n  }\n};\n\n// src/broadcasts/broadcasts.ts\nvar Broadcasts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      if (payload.react) {\n        payload.html = yield render(payload.react);\n      }\n      const data = yield this.resend.post(\n        \"/broadcasts\",\n        {\n          name: payload.name,\n          audience_id: payload.audienceId,\n          preview_text: payload.previewText,\n          from: payload.from,\n          html: payload.html,\n          reply_to: payload.replyTo,\n          subject: payload.subject,\n          text: payload.text\n        },\n        options\n      );\n      return data;\n    });\n  }\n  send(id, payload) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.post(\n        `/broadcasts/${id}/send`,\n        { scheduled_at: payload == null ? void 0 : payload.scheduledAt }\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/broadcasts?${queryString}` : \"/broadcasts\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/broadcasts/${id}`\n      );\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/broadcasts/${id}`\n      );\n      return data;\n    });\n  }\n  update(id, payload) {\n    return __async(this, null, function* () {\n      if (payload.react) {\n        payload.html = yield render(payload.react);\n      }\n      const data = yield this.resend.patch(\n        `/broadcasts/${id}`,\n        {\n          name: payload.name,\n          audience_id: payload.audienceId,\n          from: payload.from,\n          html: payload.html,\n          text: payload.text,\n          subject: payload.subject,\n          reply_to: payload.replyTo,\n          preview_text: payload.previewText\n        }\n      );\n      return data;\n    });\n  }\n};\n\n// src/contacts/contacts.ts\nvar Contacts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        `/audiences/${payload.audienceId}/contacts`,\n        {\n          unsubscribed: payload.unsubscribed,\n          email: payload.email,\n          first_name: payload.firstName,\n          last_name: payload.lastName\n        },\n        options\n      );\n      return data;\n    });\n  }\n  list(options) {\n    return __async(this, null, function* () {\n      const _a = options, { audienceId } = _a, paginationOptions = __objRest(_a, [\"audienceId\"]);\n      const queryString = buildPaginationQuery(paginationOptions);\n      const url = queryString ? `/audiences/${audienceId}/contacts?${queryString}` : `/audiences/${audienceId}/contacts`;\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(options) {\n    return __async(this, null, function* () {\n      if (!options.id && !options.email) {\n        return {\n          data: null,\n          error: {\n            message: \"Missing `id` or `email` field.\",\n            name: \"missing_required_field\"\n          }\n        };\n      }\n      const data = yield this.resend.get(\n        `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`\n      );\n      return data;\n    });\n  }\n  update(options) {\n    return __async(this, null, function* () {\n      if (!options.id && !options.email) {\n        return {\n          data: null,\n          error: {\n            message: \"Missing `id` or `email` field.\",\n            name: \"missing_required_field\"\n          }\n        };\n      }\n      const data = yield this.resend.patch(\n        `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`,\n        {\n          unsubscribed: options.unsubscribed,\n          first_name: options.firstName,\n          last_name: options.lastName\n        }\n      );\n      return data;\n    });\n  }\n  remove(payload) {\n    return __async(this, null, function* () {\n      if (!payload.id && !payload.email) {\n        return {\n          data: null,\n          error: {\n            message: \"Missing `id` or `email` field.\",\n            name: \"missing_required_field\"\n          }\n        };\n      }\n      const data = yield this.resend.delete(\n        `/audiences/${payload.audienceId}/contacts/${(payload == null ? void 0 : payload.email) ? payload == null ? void 0 : payload.email : payload == null ? void 0 : payload.id}`\n      );\n      return data;\n    });\n  }\n};\n\n// src/common/utils/parse-domain-to-api-options.ts\nfunction parseDomainToApiOptions(domain) {\n  return {\n    name: domain.name,\n    region: domain.region,\n    custom_return_path: domain.customReturnPath\n  };\n}\n\n// src/domains/domains.ts\nvar Domains = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        \"/domains\",\n        parseDomainToApiOptions(payload),\n        options\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/domains?${queryString}` : \"/domains\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/domains/${id}`\n      );\n      return data;\n    });\n  }\n  update(payload) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.patch(\n        `/domains/${payload.id}`,\n        {\n          click_tracking: payload.clickTracking,\n          open_tracking: payload.openTracking,\n          tls: payload.tls\n        }\n      );\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/domains/${id}`\n      );\n      return data;\n    });\n  }\n  verify(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.post(\n        `/domains/${id}/verify`\n      );\n      return data;\n    });\n  }\n};\n\n// src/emails/emails.ts\nvar Emails = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  send(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      return this.create(payload, options);\n    });\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      if (payload.react) {\n        payload.html = yield render(payload.react);\n      }\n      const data = yield this.resend.post(\n        \"/emails\",\n        parseEmailToApiOptions(payload),\n        options\n      );\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/emails/${id}`\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/emails?${queryString}` : \"/emails\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  update(payload) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.patch(\n        `/emails/${payload.id}`,\n        {\n          scheduled_at: payload.scheduledAt\n        }\n      );\n      return data;\n    });\n  }\n  cancel(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.post(\n        `/emails/${id}/cancel`\n      );\n      return data;\n    });\n  }\n};\n\n// src/resend.ts\nvar defaultBaseUrl = \"https://api.resend.com\";\nvar defaultUserAgent = `resend-node:${version}`;\nvar baseUrl = typeof process !== \"undefined\" && process.env ? process.env.RESEND_BASE_URL || defaultBaseUrl : defaultBaseUrl;\nvar userAgent = typeof process !== \"undefined\" && process.env ? process.env.RESEND_USER_AGENT || defaultUserAgent : defaultUserAgent;\nvar Resend = class {\n  constructor(key) {\n    this.key = key;\n    this.apiKeys = new ApiKeys(this);\n    this.audiences = new Audiences(this);\n    this.batch = new Batch(this);\n    this.broadcasts = new Broadcasts(this);\n    this.contacts = new Contacts(this);\n    this.domains = new Domains(this);\n    this.emails = new Emails(this);\n    if (!key) {\n      if (typeof process !== \"undefined\" && process.env) {\n        this.key = process.env.RESEND_API_KEY;\n      }\n      if (!this.key) {\n        throw new Error(\n          'Missing API key. Pass it to the constructor `new Resend(\"re_123\")`'\n        );\n      }\n    }\n    this.headers = new Headers({\n      Authorization: `Bearer ${this.key}`,\n      \"User-Agent\": userAgent,\n      \"Content-Type\": \"application/json\"\n    });\n  }\n  fetchRequest(_0) {\n    return __async(this, arguments, function* (path, options = {}) {\n      try {\n        const response = yield fetch(`${baseUrl}${path}`, options);\n        if (!response.ok) {\n          try {\n            const rawError = yield response.text();\n            return { data: null, error: JSON.parse(rawError) };\n          } catch (err) {\n            if (err instanceof SyntaxError) {\n              return {\n                data: null,\n                error: {\n                  name: \"application_error\",\n                  message: \"Internal server error. We are unable to process your request right now, please try again later.\"\n                }\n              };\n            }\n            const error = {\n              message: response.statusText,\n              name: \"application_error\"\n            };\n            if (err instanceof Error) {\n              return { data: null, error: __spreadProps(__spreadValues({}, error), { message: err.message }) };\n            }\n            return { data: null, error };\n          }\n        }\n        const data = yield response.json();\n        return { data, error: null };\n      } catch (e) {\n        return {\n          data: null,\n          error: {\n            name: \"application_error\",\n            message: \"Unable to fetch data. The request could not be resolved.\"\n          }\n        };\n      }\n    });\n  }\n  post(_0, _1) {\n    return __async(this, arguments, function* (path, entity, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      if (options.idempotencyKey) {\n        headers.set(\"Idempotency-Key\", options.idempotencyKey);\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"POST\",\n        body: JSON.stringify(entity)\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  get(_0) {\n    return __async(this, arguments, function* (path, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"GET\"\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  put(_0, _1) {\n    return __async(this, arguments, function* (path, entity, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"PUT\",\n        body: JSON.stringify(entity)\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  patch(_0, _1) {\n    return __async(this, arguments, function* (path, entity, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"PATCH\",\n        body: JSON.stringify(entity)\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  delete(path, query) {\n    return __async(this, null, function* () {\n      const requestOptions = {\n        method: \"DELETE\",\n        body: JSON.stringify(query),\n        headers: this.headers\n      };\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n};\nexport {\n  Resend\n};\n", "import { Resend } from 'resend';\n\nexport async function sendVerificationEmail(email, name, verificationUrl, env) {\n  const resend = new Resend(env.RESEND_API_KEY);\n\n  const bodyText = `Hi ${name},\n\nThank you for starting your activity waiver submission!\n\nPlease click the link below to continue and complete your waiver:\n${verificationUrl}\n\nThis link will expire in 24 hours.\n\nIf you didn't request this waiver, you can safely ignore this email.\n\nRegards,\nThe Rentals Team`;\n\n  const bodyHtml = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n      <h2 style=\"color: #3b82f6;\">Complete Your Activity Waiver</h2>\n      <p>Hi ${name},</p>\n      <p>Thank you for starting your activity waiver submission!</p>\n      <p>Please click the button below to continue and complete your waiver:</p>\n      <div style=\"margin: 30px 0;\">\n        <a href=\"${verificationUrl}\" style=\"background-color: #3b82f6; color: white; padding: 12px 24px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: 600;\">\n          Complete Your Waiver\n        </a>\n      </div>\n      <p style=\"color: #64748b; font-size: 14px;\">This link will expire in 24 hours.</p>\n      <p style=\"color: #64748b; font-size: 14px;\">If you didn't request this waiver, you can safely ignore this email.</p>\n      <hr style=\"border: none; border-top: 1px solid #e2e8f0; margin: 30px 0;\">\n      <p style=\"color: #94a3b8; font-size: 12px;\">Regards,<br>The Rentals Team</p>\n    </div>\n  `;\n\n  try {\n    const { data: emailData, error } = await resend.emails.send({\n      from: `Activity Waivers <${env.EMAIL_FROM}>`,\n      to: email,\n      subject: 'Complete Your Activity Waiver',\n      text: bodyText,\n      html: bodyHtml\n    });\n\n    if (error) {\n      console.error('Resend error:', error);\n      throw new Error(error.message);\n    }\n\n    console.log('Verification email sent successfully:', emailData);\n  } catch (error) {\n    console.error('Verification email send error:', error);\n    throw new Error('Failed to send verification email: ' + error.message);\n  }\n}\n\nexport async function sendWaiverEmail(data, pdfs, pin, env) {\n  const resend = new Resend(env.RESEND_API_KEY);\n\n  const bodyText = `Hi ${data.guestName},\n\nThank you for completing your waiver for ${data.propertyId}.\nAttached: ${pdfs.map(p => p.filename).join(', ')}\n\n${pin ? 'Your Archery PIN is ' + pin + '\\n\\n' : ''}Regards,\nThe Rentals Team`;\n\n  try {\n    const { data: emailData, error } = await resend.emails.send({\n      from: `Activity Waivers <${env.EMAIL_FROM}>`,\n      to: data.guestEmail,\n      subject: 'Your activity waiver(s)',\n      text: bodyText,\n      attachments: pdfs.map(p => ({\n        filename: p.filename,\n        content: btoa(String.fromCharCode(...new Uint8Array(p.bytes)))\n      }))\n    });\n\n    if (error) {\n      console.error('Resend error:', error);\n      throw new Error(error.message);\n    }\n\n    console.log('Email sent successfully:', emailData);\n  } catch (error) {\n    console.error('Email send error:', error);\n    throw new Error('Failed to send email: ' + error.message);\n  }\n}\n\nexport async function sendMail (data, pdfs, pin, env) {\n  const resend = new Resend(env.RESEND_API_KEY);\n\n  const bodyText = `Hi ${data.guestName},\n\nThank you for completing your waiver for ${data.propertyId}.\nAttached: ${pdfs.map(p => p.filename).join(', ')}\n\n${pin ? 'Your Archery PIN is ' + pin + '\\n\\n' : ''}Regards,\nThe Rentals Team`;\n\n  try {\n    const { data: emailData, error } = await resend.emails.send({\n      from: `Activity Waivers <${env.EMAIL_FROM}>`,\n      to: data.guestEmail,\n      subject: 'Your activity waiver(s)',\n      text: bodyText,\n      attachments: pdfs.map(p => ({\n        filename: p.filename,\n        content: btoa(String.fromCharCode(...new Uint8Array(p.bytes)))\n      }))\n    });\n\n    if (error) {\n      console.error('Resend error:', error);\n      throw new Error(error.message);\n    }\n\n    console.log('Email sent successfully:', emailData);\n  } catch (error) {\n    console.error('Email send error:', error);\n    throw new Error('Failed to send email: ' + error.message);\n  }\n}\n", "import { nanoid } from '../utils/nanoid.js';\nimport { json, bad } from '../utils/admin.js';\nimport { validateSubmission } from '../services/validation.js';\nimport { saveSubmission, saveDocuments } from '../services/storage.js';\nimport { makePDFs } from '../services/pdf.js';\nimport { sendMail } from '../services/mail.js';\n\nexport async function handleSubmit(request, env) {\n  console.log('Submit endpoint called');\n  const data = await request.json();\n  console.log('Received data:', data);\n\n  /* ---- validation ----------------------------------------------------- */\n  const validationError = validateSubmission(data);\n  if (validationError) {\n    return bad(validationError);\n  }\n\n  /* ---- write submission ----------------------------------------------- */\n  const subId = nanoid(10);\n  const createdAt = new Date().toISOString();\n\n  try {\n    await saveSubmission(env, subId, data, createdAt);\n    console.log('Submission saved to database');\n  } catch (dbError) {\n    console.error('Database error:', dbError);\n    return json({ ok: false, error: 'Database not initialized. Run migrations first.' }, 500);\n  }\n\n  /* ---- generate PDFs -------------------------------------------------- */\n  let pdfInfos;\n  try {\n    pdfInfos = await makePDFs(data, subId, env);\n    console.log('PDFs generated:', pdfInfos.length);\n  } catch (pdfError) {\n    console.error('PDF generation error:', pdfError);\n    return json({ ok: false, error: 'PDF generation failed: ' + pdfError.message }, 500);\n  }\n\n  /* ---- save document records ------------------------------------------ */\n  try {\n    await saveDocuments(env, subId, pdfInfos);\n    console.log('Document records saved');\n  } catch (docError) {\n    console.error('Document save error:', docError);\n  }\n\n  const pin = data.activities.includes('archery') ? env.ARCHERY_PIN : null;\n\n  /* ---- dev mode: return download URLs --------------------------------- */\n  if (env.DEV_MODE === 'true') {\n    const downloads = pdfInfos.map(p => ({\n      filename: p.filename,\n      url: `/download/${p.r2Key}`\n    }));\n\n    return json({\n      ok: true,\n      devMode: true,\n      downloads,\n      pin\n    });\n  }\n\n  /* ---- production: send email ----------------------------------------- */\n  try {\n    await sendMail(data, pdfInfos, pin, env);\n    console.log('Email sent successfully');\n  } catch (emailError) {\n    console.error('Email sending failed:', emailError);\n    return json({ ok: false, error: 'Email sending failed: ' + emailError.message }, 500);\n  }\n\n  return json({ ok: true,\n                emailed: pdfInfos.map(p => p.filename),\n                pin });\n}\n", "import { nanoid } from '../utils/nanoid.js';\nimport { makePDFs } from '../services/pdf.js';\nimport { sendVerificationEmail, sendWaiverEmail } from '../services/mail.js';\n\nexport async function handleInitialSubmit(request, env) {\n  try {\n    const data = await request.json();\n\n    // Validate required fields\n    if (!data.propertyId || !data.checkinDate || !data.guestName || !data.guestEmail) {\n      return new Response(JSON.stringify({ ok: false, error: 'Missing required fields' }), {\n        status: 400,\n        headers: { 'content-type': 'application/json' }\n      });\n    }\n\n    // Generate submission ID and verification token\n    const submissionId = nanoid(12);\n    const verificationToken = nanoid(32);\n    const createdAt = new Date().toISOString();\n    const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(); // 24 hours\n\n    // Create pending submission record\n    await env.waivers.prepare(\n      `INSERT INTO submissions\n       (submission_id, created_at, property_id, checkin_date, guest_name, guest_email, activities,\n        status, verification_token, token_expires_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`\n    ).bind(\n      submissionId,\n      createdAt,\n      data.propertyId,\n      data.checkinDate,\n      data.guestName,\n      data.guestEmail,\n      '[]', // Empty activities initially\n      'pending',\n      verificationToken,\n      expiresAt\n    ).run();\n\n    // Send verification email\n    const verificationUrl = `${new URL(request.url).origin}/?token=${verificationToken}`;\n\n    if (env.DEV_MODE === 'true') {\n      console.log('Dev Mode: Verification email would be sent to:', data.guestEmail);\n      console.log('Dev Mode: Verification URL:', verificationUrl);\n\n      return new Response(JSON.stringify({\n        ok: true,\n        devMode: true,\n        submissionId,\n        verificationUrl\n      }), {\n        headers: { 'content-type': 'application/json' }\n      });\n    } else {\n      await sendVerificationEmail(data.guestEmail, data.guestName, verificationUrl, env);\n\n      return new Response(JSON.stringify({\n        ok: true,\n        submissionId\n      }), {\n        headers: { 'content-type': 'application/json' }\n      });\n    }\n  } catch (error) {\n    console.error('Initial submission error:', error);\n    return new Response(JSON.stringify({ ok: false, error: error.message }), {\n      status: 500,\n      headers: { 'content-type': 'application/json' }\n    });\n  }\n}\n\nexport async function handleCompleteSubmit(request, env) {\n  try {\n    const data = await request.json();\n\n    // Validate required fields\n    if (!data.submissionId || !data.activities || !data.initials || !data.signature || !data.accepted) {\n      return new Response(JSON.stringify({ ok: false, error: 'Missing required fields' }), {\n        status: 400,\n        headers: { 'content-type': 'application/json' }\n      });\n    }\n\n    // Retrieve submission\n    const submission = await env.waivers.prepare(\n      'SELECT * FROM submissions WHERE submission_id = ? AND status = ?'\n    ).bind(data.submissionId, 'pending').first();\n\n    if (!submission) {\n      return new Response(JSON.stringify({ ok: false, error: 'Invalid or expired submission' }), {\n        status: 404,\n        headers: { 'content-type': 'application/json' }\n      });\n    }\n\n    // Check if token expired\n    const expires = new Date(submission.token_expires_at);\n    if (expires < new Date()) {\n      return new Response(JSON.stringify({ ok: false, error: 'Verification token expired' }), {\n        status: 410,\n        headers: { 'content-type': 'application/json' }\n      });\n    }\n\n    // Update submission with activities\n    const completedAt = new Date().toISOString();\n    await env.waivers.prepare(\n      'UPDATE submissions SET activities = ?, status = ?, completed_at = ? WHERE submission_id = ?'\n    ).bind(\n      JSON.stringify(data.activities),\n      'completed',\n      completedAt,\n      data.submissionId\n    ).run();\n\n    // Generate PDFs\n    const submissionData = {\n      propertyId: submission.property_id,\n      checkinDate: submission.checkin_date,\n      guestName: submission.guest_name,\n      guestEmail: submission.guest_email,\n      activities: data.activities,\n      initials: data.initials,\n      signature: data.signature\n    };\n\n    const pdfs = await makePDFs(submissionData, data.submissionId, env);\n\n    // Generate archery PIN if needed\n    let archeryPin = null;\n    if (data.activities.includes('archery')) {\n      archeryPin = env.ARCHERY_PIN || '1234';\n    }\n\n    // Development mode or production mode\n    if (env.DEV_MODE === 'true') {\n      const downloads = pdfs.map(p => ({\n        filename: p.filename,\n        url: `/download/${p.id}`\n      }));\n\n      return new Response(JSON.stringify({\n        ok: true,\n        devMode: true,\n        downloads,\n        pin: archeryPin\n      }), {\n        headers: { 'content-type': 'application/json' }\n      });\n    } else {\n      // Send email with waivers\n      await sendWaiverEmail(submissionData, pdfs, archeryPin, env);\n\n      return new Response(JSON.stringify({\n        ok: true,\n        emailed: pdfs.map(p => p.filename),\n        pin: archeryPin\n      }), {\n        headers: { 'content-type': 'application/json' }\n      });\n    }\n  } catch (error) {\n    console.error('Complete submission error:', error);\n    return new Response(JSON.stringify({ ok: false, error: error.message }), {\n      status: 500,\n      headers: { 'content-type': 'application/json' }\n    });\n  }\n}\n", "import { json } from '../../utils/admin.js';\n\nexport async function handleAdminSearch(request, env) {\n  const url = new URL(request.url);\n  const qName     = url.searchParams.get('name')     ?? '';\n  const qEmail    = url.searchParams.get('email')    ?? '';\n  const qProp     = url.searchParams.get('prop')     ?? '';\n  const qDate     = url.searchParams.get('date')     ?? '';\n  const qActivity = url.searchParams.get('activity') ?? '';\n\n  const conditions = [];\n  const params = [];\n\n  if (qName) {\n    conditions.push('guest_name LIKE ?');\n    params.push(`%${qName}%`);\n  }\n\n  if (qEmail) {\n    conditions.push('guest_email LIKE ?');\n    params.push(`%${qEmail}%`);\n  }\n\n  if (qProp) {\n    conditions.push('property_id LIKE ?');\n    params.push(`%${qProp}%`);\n  }\n\n  if (qDate) {\n    conditions.push('checkin_date LIKE ?');\n    params.push(`%${qDate}%`);\n  }\n\n  if (qActivity) {\n    conditions.push('activities LIKE ?');\n    params.push(`%${qActivity}%`);\n  }\n\n  const whereClause = conditions.length > 0\n    ? `WHERE ${conditions.join(' AND ')}`\n    : '';\n\n  const query = `SELECT * FROM submissions\n                 ${whereClause}\n                 ORDER BY created_at DESC\n                 LIMIT 200`;\n\n  const rows = await env.waivers.prepare(query).bind(...params).all();\n\n  return json({ rows });\n}\n", "import { json } from '../../utils/admin.js';\n\nexport async function handleAdminActivities(request, env) {\n  const url = new URL(request.url);\n  const { pathname } = url;\n  const propertyId = url.searchParams.get('property') || 'cabin-12';\n\n  if (request.method === 'GET') {\n    return await getActivities(env, propertyId);\n  }\n\n  if (request.method === 'POST') {\n    if (pathname === '/admin/activities/add') {\n      return await addActivity(request, env, propertyId);\n    }\n    if (pathname === '/admin/activities/remove') {\n      return await removeActivity(request, env, propertyId);\n    }\n    if (pathname === '/admin/activities/update') {\n      return await updateActivity(request, env, propertyId);\n    }\n    return await replaceAllActivities(request, env, propertyId);\n  }\n\n  return new Response('Method not allowed', { status: 405 });\n}\n\nasync function getActivities(env, propertyId) {\n  const result = await env.waivers.prepare(\n    'SELECT slug, label, risk FROM activities WHERE property_id = ? ORDER BY label'\n  ).bind(propertyId).all();\n\n  return json({ ok: true, propertyId, activities: result.results || [] });\n}\n\nasync function addActivity(request, env, propertyId) {\n  const data = await request.json();\n\n  if (!data.slug || !data.label || !data.risk) {\n    return json({ ok: false, error: 'Must provide slug, label, and risk' }, 400);\n  }\n\n  const existingCheck = await env.waivers.prepare(\n    'SELECT id FROM activities WHERE property_id = ? AND slug = ?'\n  ).bind(propertyId, data.slug).first();\n\n  if (existingCheck) {\n    return json({ ok: false, error: 'Activity with this slug already exists' }, 400);\n  }\n\n  await env.waivers.prepare(\n    'INSERT INTO activities (property_id, slug, label, risk, created_at) VALUES (?, ?, ?, ?, ?)'\n  ).bind(propertyId, data.slug, data.label, data.risk, new Date().toISOString()).run();\n\n  const result = await env.waivers.prepare(\n    'SELECT slug, label, risk FROM activities WHERE property_id = ? ORDER BY label'\n  ).bind(propertyId).all();\n\n  return json({ ok: true, propertyId, activities: result.results || [], added: data.slug });\n}\n\nasync function removeActivity(request, env, propertyId) {\n  const data = await request.json();\n\n  if (!data.slug) {\n    return json({ ok: false, error: 'Must provide slug' }, 400);\n  }\n\n  const existingCheck = await env.waivers.prepare(\n    'SELECT id FROM activities WHERE property_id = ? AND slug = ?'\n  ).bind(propertyId, data.slug).first();\n\n  if (!existingCheck) {\n    return json({ ok: false, error: 'Activity not found' }, 404);\n  }\n\n  await env.waivers.prepare(\n    'DELETE FROM activities WHERE property_id = ? AND slug = ?'\n  ).bind(propertyId, data.slug).run();\n\n  const result = await env.waivers.prepare(\n    'SELECT slug, label, risk FROM activities WHERE property_id = ? ORDER BY label'\n  ).bind(propertyId).all();\n\n  return json({ ok: true, propertyId, activities: result.results || [], removed: data.slug });\n}\n\nasync function updateActivity(request, env, propertyId) {\n  const data = await request.json();\n\n  if (!data.slug) {\n    return json({ ok: false, error: 'Must provide slug' }, 400);\n  }\n\n  const existingCheck = await env.waivers.prepare(\n    'SELECT id FROM activities WHERE property_id = ? AND slug = ?'\n  ).bind(propertyId, data.slug).first();\n\n  if (!existingCheck) {\n    return json({ ok: false, error: 'Activity not found' }, 404);\n  }\n\n  const updates = [];\n  const bindings = [];\n\n  if (data.label) {\n    updates.push('label = ?');\n    bindings.push(data.label);\n  }\n  if (data.risk) {\n    updates.push('risk = ?');\n    bindings.push(data.risk);\n  }\n\n  if (updates.length > 0) {\n    bindings.push(propertyId, data.slug);\n    await env.waivers.prepare(\n      `UPDATE activities SET ${updates.join(', ')} WHERE property_id = ? AND slug = ?`\n    ).bind(...bindings).run();\n  }\n\n  const result = await env.waivers.prepare(\n    'SELECT slug, label, risk FROM activities WHERE property_id = ? ORDER BY label'\n  ).bind(propertyId).all();\n\n  return json({ ok: true, propertyId, activities: result.results || [], updated: data.slug });\n}\n\nasync function replaceAllActivities(request, env, propertyId) {\n  const data = await request.json();\n\n  if (!Array.isArray(data.activities)) {\n    return json({ ok: false, error: 'activities must be an array' }, 400);\n  }\n\n  for (const activity of data.activities) {\n    if (!activity.slug || !activity.label || !activity.risk) {\n      return json({ ok: false, error: 'Each activity must have slug, label, and risk' }, 400);\n    }\n  }\n\n  await env.waivers.prepare(\n    'DELETE FROM activities WHERE property_id = ?'\n  ).bind(propertyId).run();\n\n  const timestamp = new Date().toISOString();\n  for (const activity of data.activities) {\n    await env.waivers.prepare(\n      'INSERT INTO activities (property_id, slug, label, risk, created_at) VALUES (?, ?, ?, ?, ?)'\n    ).bind(propertyId, activity.slug, activity.label, activity.risk, timestamp).run();\n  }\n\n  const result = await env.waivers.prepare(\n    'SELECT slug, label, risk FROM activities WHERE property_id = ? ORDER BY label'\n  ).bind(propertyId).all();\n\n  return json({ ok: true, propertyId, activities: result.results || [] });\n}\n", "import { json } from '../../utils/admin.js';\n\nexport async function handleAdminRisks(request, env) {\n  const url = new URL(request.url);\n  const level = url.searchParams.get('level');\n\n  if (request.method === 'GET') {\n    if (level) {\n      return await getRisk(env, level);\n    }\n    return await getAllRisks(env);\n  }\n\n  if (request.method === 'POST') {\n    return await updateRisk(request, env);\n  }\n\n  return new Response('Method not allowed', { status: 405 });\n}\n\nasync function getAllRisks(env) {\n  const result = await env.waivers.prepare(\n    'SELECT level, description FROM risk_descriptions'\n  ).all();\n\n  const risks = {};\n  for (const row of (result.results || [])) {\n    risks[row.level] = { level: row.level, description: row.description };\n  }\n\n  return json({ ok: true, risks });\n}\n\nasync function getRisk(env, level) {\n  const result = await env.waivers.prepare(\n    'SELECT level, description FROM risk_descriptions WHERE level = ?'\n  ).bind(level).first();\n\n  if (!result) {\n    return json({ ok: false, error: 'Risk level not found' }, 404);\n  }\n\n  return json({ ok: true, risk: { level: result.level, description: result.description } });\n}\n\nasync function updateRisk(request, env) {\n  const data = await request.json();\n\n  if (!data.level || !data.description) {\n    return json({ ok: false, error: 'Must provide level and description' }, 400);\n  }\n\n  if (!['low', 'medium', 'high'].includes(data.level)) {\n    return json({ ok: false, error: 'level must be low, medium, or high' }, 400);\n  }\n\n  const existingCheck = await env.waivers.prepare(\n    'SELECT level FROM risk_descriptions WHERE level = ?'\n  ).bind(data.level).first();\n\n  if (existingCheck) {\n    await env.waivers.prepare(\n      'UPDATE risk_descriptions SET description = ? WHERE level = ?'\n    ).bind(data.description, data.level).run();\n  } else {\n    await env.waivers.prepare(\n      'INSERT INTO risk_descriptions (level, description, created_at) VALUES (?, ?, ?)'\n    ).bind(data.level, data.description, new Date().toISOString()).run();\n  }\n\n  const riskData = {\n    level: data.level,\n    description: data.description\n  };\n\n  return json({ ok: true, risk: riskData });\n}\n", "import { json } from '../../utils/admin.js';\n\nexport async function handleAdminProperties(request, env) {\n  const url = new URL(request.url);\n  const { pathname } = url;\n\n  if (request.method === 'GET') {\n    return await getProperties(env);\n  }\n\n  if (request.method === 'POST') {\n    if (pathname === '/admin/properties/add') {\n      return await addProperty(request, env);\n    }\n    if (pathname === '/admin/properties/remove') {\n      return await removeProperty(request, env);\n    }\n  }\n\n  return new Response('Method not allowed', { status: 405 });\n}\n\nasync function getProperties(env) {\n  const result = await env.waivers.prepare(\n    'SELECT id, name FROM properties ORDER BY name'\n  ).all();\n\n  return json({ ok: true, properties: result.results || [] });\n}\n\nasync function addProperty(request, env) {\n  const data = await request.json();\n\n  if (!data.id || !data.name) {\n    return json({ ok: false, error: 'Must provide id and name' }, 400);\n  }\n\n  const existingCheck = await env.waivers.prepare(\n    'SELECT id FROM properties WHERE id = ?'\n  ).bind(data.id).first();\n\n  if (existingCheck) {\n    return json({ ok: false, error: 'Property with this ID already exists' }, 400);\n  }\n\n  await env.waivers.prepare(\n    'INSERT INTO properties (id, name, created_at) VALUES (?, ?, ?)'\n  ).bind(data.id, data.name, new Date().toISOString()).run();\n\n  if (data.copyDefaultActivities) {\n    const defaultActivities = await env.waivers.prepare(\n      'SELECT slug, label, risk FROM activities WHERE property_id = (SELECT id FROM properties LIMIT 1)'\n    ).all();\n\n    for (const activity of (defaultActivities.results || [])) {\n      await env.waivers.prepare(\n        'INSERT INTO activities (property_id, slug, label, risk, created_at) VALUES (?, ?, ?, ?, ?)'\n      ).bind(data.id, activity.slug, activity.label, activity.risk, new Date().toISOString()).run();\n    }\n  }\n\n  const result = await env.waivers.prepare(\n    'SELECT id, name FROM properties ORDER BY name'\n  ).all();\n\n  return json({ ok: true, properties: result.results || [], added: data.id });\n}\n\nasync function removeProperty(request, env) {\n  const data = await request.json();\n\n  if (!data.id) {\n    return json({ ok: false, error: 'Must provide id' }, 400);\n  }\n\n  const countResult = await env.waivers.prepare(\n    'SELECT COUNT(*) as count FROM properties'\n  ).first();\n\n  if (countResult.count <= 1) {\n    return json({ ok: false, error: 'Cannot delete the last property' }, 400);\n  }\n\n  const existingCheck = await env.waivers.prepare(\n    'SELECT id FROM properties WHERE id = ?'\n  ).bind(data.id).first();\n\n  if (!existingCheck) {\n    return json({ ok: false, error: 'Property not found' }, 404);\n  }\n\n  await env.waivers.prepare(\n    'DELETE FROM properties WHERE id = ?'\n  ).bind(data.id).run();\n\n  const result = await env.waivers.prepare(\n    'SELECT id, name FROM properties ORDER BY name'\n  ).all();\n\n  return json({ ok: true, properties: result.results || [], removed: data.id });\n}\n", "import { json } from '../../utils/admin.js';\n\nexport async function handleAdminDocument(request, env) {\n  const url = new URL(request.url);\n  const submissionId = url.searchParams.get('submission');\n  const activity = url.searchParams.get('activity');\n\n  if (!submissionId || !activity) {\n    return json({ ok: false, error: 'Missing submission or activity' }, 400);\n  }\n\n  try {\n    const result = await env.waivers.prepare(\n      'SELECT document_id, r2_key FROM documents WHERE submission_id = ?1 AND activity = ?2'\n    ).bind(submissionId, activity).first();\n\n    if (!result) {\n      return json({ ok: false, error: 'Document not found' }, 404);\n    }\n\n    return json({\n      ok: true,\n      document_id: result.document_id,\n      r2_key: result.r2_key\n    });\n  } catch (error) {\n    return json({ ok: false, error: error.message }, 500);\n  }\n}\n", "import { json } from '../../utils/admin.js';\n\nasync function generateDocumentHash(data) {\n  const hashInput = JSON.stringify({\n    submission_id: data.submission_id,\n    property_id: data.property_id,\n    checkin_date: data.checkin_date,\n    guest_name: data.guest_name,\n    guest_email: data.guest_email,\n    activity: data.activity,\n    activity_label: data.activity_label,\n    initials: data.initials,\n    signature_key: data.signature_key,\n    created_at: data.created_at,\n    release_version: data.release_version,\n    release_date: data.release_date\n  });\n\n  const encoder = new TextEncoder();\n  const dataBuffer = encoder.encode(hashInput);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n\n  return hashHex;\n}\n\nexport async function handleAdminVerify(request, env) {\n  const url = new URL(request.url);\n  const documentId = url.searchParams.get('document');\n\n  if (!documentId) {\n    return json({ ok: false, error: 'Missing document ID' }, 400);\n  }\n\n  try {\n    // Get stored hash\n    const hashResult = await env.waivers.prepare(\n      'SELECT hash_value FROM hashes WHERE document_id = ?1'\n    ).bind(documentId).first();\n\n    if (!hashResult) {\n      return json({ ok: false, error: 'Hash not found' }, 404);\n    }\n\n    // Get document and submission data\n    const docData = await env.waivers.prepare(`\n      SELECT\n        d.activity,\n        d.initials,\n        s.submission_id,\n        s.created_at,\n        s.property_id,\n        s.checkin_date,\n        s.guest_name,\n        s.guest_email\n      FROM documents d\n      JOIN submissions s ON d.submission_id = s.submission_id\n      WHERE d.document_id = ?1\n    `).bind(documentId).first();\n\n    if (!docData) {\n      return json({ ok: false, error: 'Document not found' }, 404);\n    }\n\n    // Get activity info for label\n    const activityResult = await env.waivers.prepare(\n      'SELECT label FROM activities WHERE property_id = ? AND slug = ?'\n    ).bind(docData.property_id, docData.activity).first();\n    const activityInfo = activityResult ? { label: activityResult.label } : null;\n\n    // Construct signature key (deterministic from submission data)\n    const nameParts = docData.guest_name.trim().split(/\\s+/);\n    const firstName = nameParts[0]?.toLowerCase().replace(/[^a-z]/g, '') || 'unknown';\n    const lastName = nameParts.length > 1\n      ? nameParts[nameParts.length - 1].toLowerCase().replace(/[^a-z]/g, '')\n      : 'unknown';\n\n    const createdDate = new Date(docData.created_at);\n    const y = createdDate.getUTCFullYear();\n    const m = String(createdDate.getUTCMonth() + 1).padStart(2, '0');\n    const d = String(createdDate.getUTCDate()).padStart(2, '0');\n\n    const signatureKey = `waivers/${y}/${m}/${d}/${docData.property_id}/signatures/${lastName}-${firstName}-${docData.submission_id}.png`;\n\n    // Get latest release at time of document creation\n    const release = await env.waivers.prepare(\n      'SELECT version, release_date FROM releases WHERE release_date <= ?1 ORDER BY release_date DESC, version DESC LIMIT 1'\n    ).bind(docData.created_at.split('T')[0]).first();\n\n    if (!release) {\n      return json({ ok: false, error: 'No release found for document creation date' }, 404);\n    }\n\n    const hashData = {\n      submission_id: docData.submission_id,\n      property_id: docData.property_id,\n      checkin_date: docData.checkin_date,\n      guest_name: docData.guest_name,\n      guest_email: docData.guest_email,\n      activity: docData.activity,\n      activity_label: activityInfo?.label || docData.activity,\n      initials: docData.initials || '',\n      signature_key: signatureKey,\n      created_at: docData.created_at,\n      release_version: release.version,\n      release_date: release.release_date\n    };\n\n    const computedHash = await generateDocumentHash(hashData);\n    const verified = computedHash === hashResult.hash_value;\n\n    return json({\n      ok: true,\n      verified,\n      stored_hash: hashResult.hash_value,\n      computed_hash: computedHash\n    });\n  } catch (error) {\n    return json({ ok: false, error: error.message }, 500);\n  }\n}\n", "import { json } from '../../utils/admin.js';\n\nasync function getLatestRelease(env) {\n  return await env.waivers.prepare(\n    'SELECT version, release_date, waiver_text, created_at FROM releases ORDER BY release_date DESC, version DESC LIMIT 1'\n  ).first();\n}\n\nasync function getAllReleases(env) {\n  const result = await env.waivers.prepare(\n    'SELECT version, release_date, waiver_text, created_at FROM releases ORDER BY release_date DESC, version DESC'\n  ).all();\n  return result.results || [];\n}\n\nfunction incrementVersion(version) {\n  if (!version) return '1.0.0';\n\n  const parts = version.split('.');\n  if (parts.length !== 3) return '1.0.0';\n\n  const [major, minor, patch] = parts.map(Number);\n  return `${major}.${minor}.${patch + 1}`;\n}\n\nexport async function handleAdminReleases(request, env) {\n  const url = new URL(request.url);\n  const pathname = url.pathname;\n\n  // GET /admin/releases - Get all releases\n  if (request.method === 'GET' && pathname === '/admin/releases') {\n    try {\n      const current = await getLatestRelease(env);\n      const releases = await getAllReleases(env);\n\n      return json({\n        ok: true,\n        current,\n        releases\n      });\n    } catch (error) {\n      return json({ ok: false, error: error.message }, 500);\n    }\n  }\n\n  // POST /admin/releases/create - Create new release\n  if (request.method === 'POST' && pathname === '/admin/releases/create') {\n    try {\n      const data = await request.json();\n      const { version, waiver_text } = data;\n\n      if (!waiver_text || !waiver_text.trim()) {\n        return json({ ok: false, error: 'Waiver text is required' }, 400);\n      }\n\n      let finalVersion = version;\n\n      // Auto-increment if no version specified\n      if (!finalVersion) {\n        const latest = await getLatestRelease(env);\n        finalVersion = incrementVersion(latest?.version);\n      }\n\n      // Validate version format\n      if (!/^[0-9]+\\.[0-9]+\\.[0-9]+$/.test(finalVersion)) {\n        return json({ ok: false, error: 'Invalid version format. Must be X.Y.Z (e.g., 1.0.1)' }, 400);\n      }\n\n      // Check if version already exists\n      const existing = await env.waivers.prepare(\n        'SELECT version FROM releases WHERE version = ?1'\n      ).bind(finalVersion).first();\n\n      if (existing) {\n        return json({ ok: false, error: `Version ${finalVersion} already exists` }, 400);\n      }\n\n      // Insert new release\n      const now = new Date();\n      const releaseDate = now.toISOString().split('T')[0]; // YYYY-MM-DD\n      const createdAt = now.toISOString();\n\n      await env.waivers.prepare(\n        'INSERT INTO releases (version, release_date, waiver_text, created_at) VALUES (?1, ?2, ?3, ?4)'\n      ).bind(finalVersion, releaseDate, waiver_text.trim(), createdAt).run();\n\n      return json({\n        ok: true,\n        version: finalVersion,\n        release_date: releaseDate\n      });\n    } catch (error) {\n      return json({ ok: false, error: error.message }, 500);\n    }\n  }\n\n  return json({ ok: false, error: 'Not found' }, 404);\n}\n", "export async function handleAdminDownloadAll(request, env) {\n  const url = new URL(request.url);\n  const submissionId = url.searchParams.get('submission');\n\n  if (!submissionId) {\n    return new Response('Missing submission ID', { status: 400 });\n  }\n\n  try {\n    // Get all documents for this submission\n    const documents = await env.waivers.prepare(\n      'SELECT document_id, activity, r2_key FROM documents WHERE submission_id = ?1'\n    ).bind(submissionId).all();\n\n    if (!documents.results || documents.results.length === 0) {\n      return new Response('No documents found', { status: 404 });\n    }\n\n    // Get submission info for filename\n    const submission = await env.waivers.prepare(\n      'SELECT guest_name, checkin_date FROM submissions WHERE submission_id = ?1'\n    ).bind(submissionId).first();\n\n    // For now, we'll use fflate to create a zip file\n    // Import at the top of the file when we add it\n    const { zipSync, strToU8 } = await import('fflate');\n\n    const files = {};\n\n    // Fetch all PDFs from R2\n    for (const doc of documents.results) {\n      const obj = await env.WAIVERS_R2.get(doc.r2_key);\n      if (obj) {\n        const arrayBuffer = await obj.arrayBuffer();\n        const uint8Array = new Uint8Array(arrayBuffer);\n        files[`${doc.activity}-waiver.pdf`] = uint8Array;\n      }\n    }\n\n    // Create zip file\n    const zipped = zipSync(files, { level: 6 });\n\n    // Create filename from guest name and date\n    const guestName = submission.guest_name.replace(/[^a-zA-Z0-9]/g, '-');\n    const filename = `${guestName}-${submission.checkin_date}-waivers.zip`;\n\n    return new Response(zipped, {\n      headers: {\n        'Content-Type': 'application/zip',\n        'Content-Disposition': `attachment; filename=\"${filename}\"`\n      }\n    });\n  } catch (error) {\n    console.error('Error creating zip:', error);\n    return new Response('Error creating zip file: ' + error.message, { status: 500 });\n  }\n}\n", "import { json } from '../../utils/admin.js';\n\nconst CACHE_KEY = 'admin_debug_cache';\nconst CACHE_DURATION = 7 * 24 * 60 * 60 * 1000; // 7 days in milliseconds\n\nexport async function handleAdminDebug(request, env) {\n  const url = new URL(request.url);\n  const forceRefresh = url.searchParams.get('refresh') === 'true';\n\n  try {\n    // Fetch fresh data from database\n    const debugData = {\n      timestamp: Date.now(),\n      d1: {}\n    };\n\n    // Get all D1 tables\n    const tables = await env.waivers.prepare(\n      \"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' AND name NOT LIKE '_cf_%' ORDER BY name\"\n    ).all();\n\n    for (const table of tables.results) {\n      const tableName = table.name;\n\n      // Get count\n      const countResult = await env.waivers.prepare(\n        `SELECT COUNT(*) as count FROM ${tableName}`\n      ).first();\n\n      // Get rows\n      const rowsResult = await env.waivers.prepare(\n        `SELECT * FROM ${tableName} LIMIT 50`\n      ).all();\n\n      debugData.d1[tableName] = {\n        count: countResult.count,\n        rows: rowsResult.results || []\n      };\n    }\n\n    return json({\n      ok: true,\n      lastUpdate: new Date(debugData.timestamp).toISOString(),\n      d1: debugData.d1\n    });\n\n  } catch (error) {\n    console.error('Debug data error:', error);\n    return json({ ok: false, error: error.message }, 500);\n  }\n}\n", "import { readFileSync } from 'fs';\nimport { join } from 'path';\n\nexport async function handleAdminApiDocs() {\n  try {\n    // In Cloudflare Workers, we need to embed the content at build time\n    // For now, we'll just return the markdown content directly\n    const apiDocs = `# API Documentation\n\nThis document describes the public API endpoints for the waiver management system.\n\n## Endpoints\n\n### GET /\n\n**Description:** Returns the HTML waiver form for guests to fill out and submit.\n\n**Response:** HTML page with embedded property, activity, and risk data.\n\n**Example:**\n\\`\\`\\`bash\ncurl https://activities.rtxsecured.com/\n\\`\\`\\`\n\n---\n\n### POST /submit\n\n**Description:** Submits a completed waiver form with guest information, selected activities, initials, and signature.\n\n**Request Body:**\n\\`\\`\\`json\n{\n  \"propertyId\": \"cabin-13\",\n  \"checkinDate\": \"2025-10-15\",\n  \"guestName\": \"John Doe\",\n  \"guestEmail\": \"john@example.com\",\n  \"activities\": [\"kayaking\", \"ziplining\", \"archery\"],\n  \"initials\": {\n    \"kayaking\": \"JD\",\n    \"ziplining\": \"JD\",\n    \"archery\": \"JD\"\n  },\n  \"signature\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...\",\n  \"accepted\": true\n}\n\\`\\`\\`\n\n**Response (Production Mode):**\n\\`\\`\\`json\n{\n  \"ok\": true,\n  \"devMode\": false,\n  \"emailed\": [\n    \"cabin-13_kayaking_20251015.pdf\",\n    \"cabin-13_ziplining_20251015.pdf\",\n    \"cabin-13_archery_20251015.pdf\"\n  ],\n  \"pin\": \"1234\"\n}\n\\`\\`\\`\n\n**Response (Development Mode):**\n\\`\\`\\`json\n{\n  \"ok\": true,\n  \"devMode\": true,\n  \"downloads\": [\n    {\n      \"filename\": \"cabin-13_kayaking_20251015.pdf\",\n      \"url\": \"/download/abc123def456\"\n    },\n    {\n      \"filename\": \"cabin-13_ziplining_20251015.pdf\",\n      \"url\": \"/download/def456ghi789\"\n    }\n  ],\n  \"pin\": \"1234\"\n}\n\\`\\`\\`\n\n**Notes:**\n- The \\`pin\\` field is only included if the \"archery\" activity is selected\n- In development mode (\\`DEV_MODE=true\\`), PDFs are generated and stored but not emailed\n- In production mode, PDFs are emailed to the guest's email address\n\n---\n\n### GET /admin/search\n\n**Description:** Search for waiver submissions by guest name or email.\n\n**Query Parameters:**\n- \\`q\\` (required): Search query string\n\n**Response:**\n\\`\\`\\`json\n{\n  \"ok\": true,\n  \"results\": [...]\n}\n\\`\\`\\`\n\n---\n\n### GET /status\n\n**Description:** Check the status of a waiver submission by ID.\n\n**Query Parameters:**\n- \\`id\\` (required): Submission ID\n\n**Response:**\n\\`\\`\\`json\n{\n  \"ok\": true,\n  \"submission\": {...},\n  \"documents\": [...]\n}\n\\`\\`\\`\n\n---\n\n## Admin Endpoints\n\n### Properties Management\n\n#### GET /admin/properties\n\nList all configured properties.\n\n#### POST /admin/properties/add\n\nAdd a new property.\n\n#### POST /admin/properties/remove\n\nRemove a property.\n\n---\n\n### Activities Management\n\n#### GET /admin/activities\n\nGet all activities for a specific property.\n\n**Query Parameters:**\n- \\`property\\` (optional): Property ID\n\n#### POST /admin/activities/add\n\nAdd a new activity to a property.\n\n#### POST /admin/activities/update\n\nUpdate an existing activity.\n\n#### POST /admin/activities/remove\n\nRemove an activity from a property.\n\n---\n\n### Risk Levels Management\n\n#### GET /admin/risks\n\nGet all risk level definitions.\n\n#### POST /admin/risks\n\nUpdate a risk level definition.\n\n---\n\n### Document Management\n\n#### GET /admin/document\n\nGet document metadata by submission ID and activity.\n\n**Query Parameters:**\n- \\`submission\\` (required): Submission ID\n- \\`activity\\` (required): Activity slug\n\n#### GET /admin/download-all\n\nDownload all waiver PDFs for a submission as a ZIP file.\n\n**Query Parameters:**\n- \\`submission\\` (required): Submission ID\n\n---\n\n### Release Management\n\n#### GET /admin/releases\n\nGet all waiver text releases (versioned legal text).\n\n#### POST /admin/releases/create\n\nCreate a new waiver text release.\n\n**Request Body:**\n\\`\\`\\`json\n{\n  \"version\": \"1.0.3\",\n  \"waiver_text\": \"Updated legal waiver text...\"\n}\n\\`\\`\\`\n\n**Notes:**\n- If \\`version\\` is omitted, it will auto-increment from the latest version\n- Version must follow semantic versioning format: X.Y.Z\n- Version must be unique\n\n---\n\n### Document Verification\n\n#### GET /admin/verify\n\nVerify document integrity by comparing stored hash with computed hash.\n\n**Query Parameters:**\n- \\`document\\` (required): Document ID\n\n**Response:**\n\\`\\`\\`json\n{\n  \"ok\": true,\n  \"verified\": true,\n  \"stored_hash\": \"abc123...\",\n  \"computed_hash\": \"abc123...\"\n}\n\\`\\`\\`\n\n**Notes:**\n- Documents are hashed using SHA-256\n- Hash includes: submission data, activity, initials, signature, and release version\n- Used to verify documents haven't been tampered with\n\n---\n\n### Debug Panel\n\n#### GET /admin/debug\n\nView KV store and D1 database tables for debugging.\n\n**Query Parameters:**\n- \\`refresh\\` (optional): Set to \"true\" to force refresh cached data\n\n**Notes:**\n- Data is cached for 7 days\n- Shows all PROPS_KV keys and values\n- Shows all D1 tables with up to 50 rows each\n`;\n\n    return new Response(apiDocs, {\n      headers: {\n        'Content-Type': 'text/plain; charset=utf-8'\n      }\n    });\n  } catch (error) {\n    return new Response('Error loading API documentation', { status: 500 });\n  }\n}\n", "import { json } from '../utils/admin.js';\n\nexport async function handleStatus(env) {\n  try {\n    const dbOK = await env.waivers.prepare('SELECT 1').first();\n    return json({ ok: true, db: !!dbOK, ts: Date.now() });\n  } catch (error) {\n    return json({ ok: false, error: error.message, ts: Date.now() });\n  }\n}\n", "export async function handleDownload(request, env) {\n  const { pathname } = new URL(request.url);\n  const r2Key = pathname.replace('/download/', '');\n\n  if (env.DEV_MODE !== 'true') {\n    return new Response('Downloads only available in dev mode', { status: 403 });\n  }\n\n  const object = await env.WAIVERS_R2.get(r2Key);\n\n  if (!object) {\n    return new Response('PDF not found', { status: 404 });\n  }\n\n  const filename = r2Key.split('/').pop();\n\n  return new Response(object.body, {\n    headers: {\n      'Content-Type': 'application/pdf',\n      'Content-Disposition': `attachment; filename=\"${filename}\"`,\n      'Cache-Control': 'private, max-age=300'\n    }\n  });\n}\n", "import { handleRoot } from './routes/root.js';\nimport { handleSubmit } from './routes/submit.js';\nimport { handleInitialSubmit, handleCompleteSubmit } from './routes/submit-flow.js';\nimport { handleAdminSearch } from './routes/admin/search.js';\nimport { handleAdminActivities } from './routes/admin/activities.js';\nimport { handleAdminRisks } from './routes/admin/risks.js';\nimport { handleAdminProperties } from './routes/admin/properties.js';\nimport { handleAdminDocument } from './routes/admin/document.js';\nimport { handleAdminVerify } from './routes/admin/verify.js';\nimport { handleAdminReleases } from './routes/admin/releases.js';\nimport { handleAdminDownloadAll } from './routes/admin/download-all.js';\nimport { handleAdminDebug } from './routes/admin/debug.js';\nimport { handleAdminApiDocs } from './routes/admin/api-docs.js';\nimport { handleStatus } from './routes/status.js';\nimport { handleDownload } from './routes/download.js';\nimport { handleAdmin } from './utils/admin.js';\n\nexport default {\n  async fetch(request, env, ctx) {\n    const { pathname } = new URL(request.url);\n\n    try {\n      if (request.method === 'GET'  && pathname === '/')                      return await handleRoot(request, env);\n      if (request.method === 'POST' && pathname === '/submit')                return await handleSubmit(request, env);\n      if (request.method === 'POST' && pathname === '/submit/initial')        return await handleInitialSubmit(request, env);\n      if (request.method === 'POST' && pathname === '/submit/complete')       return await handleCompleteSubmit(request, env);\n      if (request.method === 'GET'  && pathname === '/admin/search')          return await handleAdminSearch(request, env);\n      if (request.method === 'GET'  && pathname === '/status')                return await handleStatus(env);\n      \n      if (request.method === 'GET'  && pathname === '/admin')                 return await handleAdmin();\n\t  if (request.method === 'GET'  && pathname === '/admin/document')        return await handleAdminDocument(request, env);\n      if (request.method === 'GET'  && pathname === '/admin/verify')          return await handleAdminVerify(request, env);\n      if (request.method === 'GET'  && pathname === '/admin/download-all')    return await handleAdminDownloadAll(request, env);\n      if (request.method === 'GET'  && pathname === '/admin/debug')           return await handleAdminDebug(request, env);\n      if (request.method === 'GET'  && pathname === '/admin/api-docs')        return await handleAdminApiDocs();\n      if ((request.method === 'GET' || request.method === 'POST') && pathname.startsWith('/admin/releases'))\treturn await handleAdminReleases(request, env);\n      if ((request.method === 'GET' || request.method === 'POST') && pathname.startsWith('/admin/activities')) \treturn await handleAdminActivities(request, env);\n      if ((request.method === 'GET' || request.method === 'POST') && pathname.startsWith('/admin/properties'))\treturn await handleAdminProperties(request, env);\n      if ((request.method === 'GET' || request.method === 'POST') && pathname === '/admin/risks')\t\t\t\treturn await handleAdminRisks(request, env);\n      if (request.method === 'GET'  && pathname.startsWith('/download/'))     return await handleDownload(request, env);\n\n      return new Response('Not found', { status: 404 });\n    } catch (err) {\n      console.error(err);\n      return new Response('Server error', { status: 500 });\n    }\n  }\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\scrap\\\\dev\\\\vitaliyah\\\\cf\\\\src\\\\index.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\scrap\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\scrap\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\scrap\\\\dev\\\\vitaliyah\\\\cf\\\\src\\\\index.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\scrap\\\\dev\\\\vitaliyah\\\\cf\\\\.wrangler\\\\tmp\\\\bundle-l3U5iW\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\scrap\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\scrap\\\\dev\\\\vitaliyah\\\\cf\\\\.wrangler\\\\tmp\\\\bundle-l3U5iW\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\scrap\\\\dev\\\\vitaliyah\\\\cf\\\\.wrangler\\\\tmp\\\\bundle-l3U5iW\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCA4HW,OAAO;AAAA,mCACL,OAAO;AAAA,wCACF,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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",
  "names": ["PerformanceMark", "clear", "count", "countReset", "createTask", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "profile", "profileEnd", "table", "time", "timeEnd", "timeLog", "timeStamp", "trace", "warn", "hrtime", "dir", "env", "count", "cwd", "hrtime", "assert", "env", "env", "env", "env", "__defProp", "version", "domain", "error", "env", "error", "env", "env", "error", "env", "env", "env", "env", "env", "error", "generateDocumentHash", "env", "release", "error", "env", "version", "error", "env", "error", "env", "table", "error", "error", "env", "error", "env", "env", "env", "env", "error", "env", "env"]
}
